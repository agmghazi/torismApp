{"version":3,"sources":["./node_modules/@arcgis/core/chunks/boundedPlane.js","./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/tileUtils.js","./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js","./node_modules/@arcgis/core/views/interactive/snapping/featureSources/WorkerTileTreeDebugger.js","./node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTilesSimple.js","./node_modules/@arcgis/core/views/support/TileTreeDebugger.js","./node_modules/@arcgis/core/views/3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js","./node_modules/@arcgis/core/geometry/support/plane.js","./node_modules/@arcgis/core/views/2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js","./node_modules/@arcgis/core/views/interactive/snapping/hints/PointSnappingHint.js","./node_modules/@arcgis/core/views/interactive/snapping/featureSources/FeatureServiceSnappingSource.js","./node_modules/@arcgis/core/geometry/support/lineSegment.js"],"names":[],"mappings":"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","file":"featureSources-FeatureServiceSnappingSource-js.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../core/has.js\";import s from\"../core/Logger.js\";import{acosClamped as i}from\"../core/mathUtils.js\";import{ObjectStack as n}from\"../core/ObjectStack.js\";import{b as t,t as a,e as o,i as r}from\"./mat4.js\";import{c as e}from\"./mat4f64.js\";import{g as c,a as u,b as g,s as b,i as f,l,r as p,d as m,f as d,k as h,m as j,n as I,p as y}from\"./vec3.js\";import{f as P,a as N,c as v}from\"./vec3f64.js\";import{create as w,projectPointClamp as M,distance2 as S}from\"../geometry/support/lineSegment.js\";import{create as T,wrap as A,copy as V,fromVectorsAndPoint as _,normal as x,fromValues as k,intersectRay as E,intersectLineSegment as O,intersectLineSegmentClamp as U,isPointInside as q,projectPoint as B,setOffsetFromPoint as F}from\"../geometry/support/plane.js\";import{distance2 as R}from\"../geometry/support/ray.js\";import{projectPointSignedLength as Y}from\"../geometry/support/vector.js\";import{sv3d as C}from\"../geometry/support/vectorStacks.js\";const L=s.getLogger(\"esri.views.3d.support.geometryUtils.boundedPlane\");class z{constructor(){this.plane=T(),this.origin=v(),this.basis1=v(),this.basis2=v()}}function G(s=Ns){return{plane:T(s.plane),origin:N(s.origin),basis1:N(s.basis1),basis2:N(s.basis2)}}function W(s,i,n){const t=Ss.get();return t.origin=s,t.basis1=i,t.basis2=n,t.plane=A(0,0,0,0),K(t),t}function D(s,i=G()){return J(s.origin,s.basis1,s.basis2,i)}function H(s,i){c(i.origin,s.origin),c(i.basis1,s.basis1),c(i.basis2,s.basis2),V(s.plane,i.plane)}function J(s,i,n,t=G()){return c(t.origin,s),c(t.basis1,i),c(t.basis2,n),K(t),ys(t,\"fromValues()\"),t}function K(s){_(s.basis2,s.basis1,s.origin,s.plane)}function Q(s,i,n){s!==n&&D(s,n);const t=u(C.get(),ms(s),i);return g(n.origin,n.origin,t),n.plane[3]-=i,n}function X(s,i,n){return Z(i,n),Q(n,gs(s,s.origin),n),n}function Z(s,i=G()){const n=(s[2]-s[0])/2,t=(s[3]-s[1])/2;return b(i.origin,s[0]+n,s[1]+t,0),b(i.basis1,n,0,0),b(i.basis2,0,t,0),k(0,0,1,0,i.plane),i}function $(s,i,n){return!!E(s.plane,i,n)&&hs(s,n)}function ss(s,i,n){if($(s,i,n))return n;const t=is(s,i,C.get());return g(n,i.origin,u(C.get(),i.direction,f(i.origin,t)/l(i.direction))),n}function is(s,n,t){const a=vs.get();Ps(s,n,a,vs.get());let o=Number.POSITIVE_INFINITY;for(const r of Ts){const e=Is(s,r,ws.get()),u=C.get();if(O(a,e,u)){const s=p(C.get(),n.origin,u),a=Math.abs(i(m(n.direction,s)));a<o&&(o=a,c(t,u))}}return o===Number.POSITIVE_INFINITY?ns(s,n,t):t}function ns(s,i,n){if($(s,i,n))return n;const t=vs.get(),a=vs.get();Ps(s,i,t,a);let o=Number.POSITIVE_INFINITY;for(const r of Ts){const e=Is(s,r,ws.get()),u=C.get();if(U(t,e,u)){const s=R(i,u);if(!q(a,u))continue;s<o&&(o=s,c(n,u))}}return os(s,i.origin)<o&&ts(s,i.origin,n),n}function ts(s,i,n){const t=B(s.plane,i,C.get()),a=M(js(s,s.basis1),t,-1,1,C.get()),o=M(js(s,s.basis2),t,-1,1,C.get());return d(n,g(C.get(),a,o),s.origin),n}function as(s,i,n){const{origin:t,basis1:a,basis2:o}=s,r=d(C.get(),i,t),e=Y(a,r),c=Y(o,r),u=Y(ms(s),r);return b(n,e,c,u)}function os(s,i){const n=as(s,i,C.get()),{basis1:t,basis2:a}=s,o=l(t),r=l(a),e=Math.max(Math.abs(n[0])-o,0),c=Math.max(Math.abs(n[1])-r,0),u=n[2];return e*e+c*c+u*u}function rs(s,i){return Math.sqrt(os(s,i))}function es(s,i){let n=Number.NEGATIVE_INFINITY;for(const t of Ts){const a=Is(s,t,ws.get()),o=S(a,i);o>n&&(n=o)}return Math.sqrt(n)}function cs(s,i){return q(s.plane,i)&&hs(s,i)}function us(s,i,n,t){return ds(s,n,t)}function gs(s,i){const n=-s.plane[3];return Y(ms(s),i)-n}function bs(s,i,n,t){const a=gs(s,i),o=u(Ms,ms(s),n-a);return g(t,i,o),t}function fs(s,i){return h(s.basis1,i.basis1)&&h(s.basis2,i.basis2)&&h(s.origin,i.origin)}function ls(s,i,n){return s!==n&&D(s,n),t(As,i),a(As,As),j(n.basis1,s.basis1,As),j(n.basis2,s.basis2,As),j(x(n.plane),x(s.plane),As),j(n.origin,s.origin,i),F(n.plane,n.origin,n.plane),n}function ps(s,i,n,t){return s!==t&&D(s,t),o(Vs,r(Vs),i,n),j(t.basis1,s.basis1,Vs),j(t.basis2,s.basis2,Vs),K(t),t}function ms(s){return x(s.plane)}function ds(s,i,n){switch(i){case 0:c(n,s.basis1),I(n,n);break;case 1:c(n,s.basis2),I(n,n);break;case 2:c(n,ms(s))}return n}function hs(s,i){const n=d(C.get(),i,s.origin),t=y(s.basis1),a=y(s.basis2),o=m(s.basis1,n),r=m(s.basis2,n);return-o-t<0&&o-t<0&&-r-a<0&&r-a<0}function js(s,i){const n=ws.get();return c(n.origin,s.origin),c(n.vector,i),n}function Is(s,i,n){const{basis1:t,basis2:a,origin:o}=s,r=u(C.get(),t,i.origin[0]),e=u(C.get(),a,i.origin[1]);g(n.origin,r,e),g(n.origin,n.origin,o);const c=u(C.get(),t,i.direction[0]),b=u(C.get(),a,i.direction[1]);return u(n.vector,g(c,c,b),2),n}function ys(s,i){Math.abs(m(s.basis1,s.basis2)/(l(s.basis1)*l(s.basis2)))>1e-6&&L.warn(i,\"Provided basis vectors are not perpendicular\"),Math.abs(m(s.basis1,ms(s)))>1e-6&&L.warn(i,\"Basis vectors and plane normal are not perpendicular\"),Math.abs(-m(ms(s),s.origin)-s.plane[3])>1e-6&&L.warn(i,\"Plane offset is not consistent with plane origin\")}function Ps(s,i,n,t){const a=ms(s);_(a,i.direction,i.origin,n),_(x(n),a,i.origin,t)}const Ns={plane:T(),origin:P(0,0,0),basis1:P(1,0,0),basis2:P(0,1,0)},vs=new n(T),ws=new n(w),Ms=v(),Ss=new n((()=>({origin:null,basis1:null,basis2:null,plane:null}))),Ts=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],As=e(),Vs=e(),_s=Object.freeze({__proto__:null,BoundedPlaneClass:z,create:G,wrap:W,copy:D,copyWithoutVerify:H,fromValues:J,updateUnboundedPlane:K,elevate:Q,setExtent:X,fromAABoundingRect:Z,intersectRay:$,intersectRayClosestSilhouette:ss,closestPointOnSilhouette:is,closestPoint:ns,projectPoint:ts,projectPointLocal:as,distance2:os,distance:rs,distanceToSilhouette:es,extrusionContainsPoint:cs,axisAt:us,altitudeAt:gs,setAltitudeAt:bs,equals:fs,transform:ls,rotate:ps,normal:ms,UP:Ns});export{fs as A,z as B,Ns as U,D as a,_s as b,G as c,H as d,cs as e,J as f,rs as g,Z as h,$ as i,Q as j,ss as k,is as l,ns as m,ms as n,as as o,ts as p,os as q,ps as r,X as s,ls as t,K as u,es as v,W as w,us as x,gs as y,bs as z};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{s}from\"../../../../../chunks/vec3.js\";import{c as n}from\"../../../../../chunks/vec4f64.js\";import{c as o,g as c,h as r}from\"../../../../../chunks/boundedPlane.js\";function t(n,o){return r(o.extent,e),c(e,s(a,n.x,n.y,0))}const e=o(),a=n();export{t as distanceToTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../core/HandleOwner.js\";import{isNone as i,isSome as r}from\"../../../../../core/maybe.js\";import{whenOrAbort as o}from\"../../../../../core/promiseUtils.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{WorkerHandle as s}from\"../../../../../core/workers/WorkerHandle.js\";import{featureGeometryTypeKebabDictionary as d}from\"../../../../../geometry/support/typeUtils.js\";let l=class extends t{constructor(e){super(e),this.availability=0,this.workerHandleUpdating=!0,this.editId=0}get updating(){return this.updatingHandles.updating||this.workerHandleUpdating}destroy(){this.workerHandle.destroy()}initialize(){this.workerHandle=new p(this.schedule),this.handles.add([this.workerHandle.on(\"notify-updating\",(({updating:e})=>this.workerHandleUpdating=e)),this.workerHandle.on(\"notify-availability\",(({availability:e})=>this._set(\"availability\",e)))])}async setup(e,t){const r=this.serviceInfoFromLayer(e.layer);if(i(r))return;const o={configuration:this.convertConfiguration(e.configuration),serviceInfo:r,spatialReference:e.spatialReference.toJSON()};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"setup\",o,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}async configure(e,t){const i=this.convertConfiguration(e);await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"configure\",i,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}async refresh(e){await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"refresh\",{},e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},e))}async fetchCandidates(e,t){const i={distance:e.distance,point:e.coordinateHelper.vectorToPoint(e.point).toJSON(),types:e.types,filter:r(e.filter)?e.filter.createQuery().toJSON():null};return this.workerHandle.invoke(i,t)}async updateTiles(e,t){const i={tiles:e.tiles,tileInfo:r(e.tileInfo)?e.tileInfo.toJSON():null,tileSize:e.tileSize};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"updateTiles\",i,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}async applyEdits(e,t){var i,r,a,n,s,d;const l=this.editId++,p={id:l};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"beginApplyEdits\",p,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t));const u=await this.updatingHandles.addPromise(o(e.result,t)),c={id:l,edits:{addedFeatures:null!=(i=null==(r=u.addedFeatures)?void 0:r.map((({objectId:e})=>e)))?i:[],deletedFeatures:null!=(a=null==(n=u.deletedFeatures)?void 0:n.map((({objectId:e,globalId:t})=>({objectId:e,globalId:t}))))?a:[],updatedFeatures:null!=(s=null==(d=u.updatedFeatures)?void 0:d.map((({objectId:e})=>e)))?s:[]}};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"endApplyEdits\",c,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}getDebugInfo(e){return this.workerHandle.invokeMethod(\"getDebugInfo\",{},e)}convertConfiguration(e){return{filter:r(e.filter)?e.filter.toJSON():null,customParameters:e.customParameters}}serviceInfoFromLayer(e){var t;return\"multipatch\"===e.geometryType||\"mesh\"===e.geometryType?null:{url:e.parsedUrl.path,fields:e.fields.map((e=>e.toJSON())),geometryType:d.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,globalIdField:e.globalIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null==(t=e.timeInfo)?void 0:t.toJSON()}}};e([a({constructOnly:!0})],l.prototype,\"schedule\",void 0),e([a({readOnly:!0})],l.prototype,\"updating\",null),e([a({readOnly:!0})],l.prototype,\"availability\",void 0),e([a()],l.prototype,\"workerHandleUpdating\",void 0),l=e([n(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle\")],l);class p extends s{constructor(e){super(\"FeatureServiceSnappingSourceWorker\",\"fetchCandidates\",e,{strategy:\"dedicated\"})}getTransferList(){return[]}}export{l as FeatureServiceSnappingSourceWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Handles.js\";import{makeHandle as r}from\"../../../../core/handleUtils.js\";import{property as o}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../../geometry/Polygon.js\";import{toExtent as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{TileTreeDebugger as n}from\"../../../support/TileTreeDebugger.js\";let d=class extends n{constructor(e){super(e),this.handles=new t}initialize(){const e=setInterval((()=>this.fetchDebugInfo()),2e3);this.handles.add(r((()=>clearInterval(e))))}destroy(){this.handles.destroy()}getTiles(){if(!this.debugInfo)return[];const e=new Map,t=new Map;this.debugInfo.storedTiles.forEach((t=>{e.set(t.data.id,t.featureCount)})),this.debugInfo.pendingTiles.forEach((r=>{e.set(r.data.id,r.featureCount),t.set(r.data.id,r.state)}));const r=r=>{var o;const s=t.get(r),a=null!=(o=e.get(r))?o:\"?\";return s?`${s}:${a}\\n${r}`:`store:${a}\\n${r}`},o=new Map;return this.debugInfo.storedTiles.forEach((e=>{o.set(e.data.id,e.data)})),this.debugInfo.pendingTiles.forEach((e=>{o.set(e.data.id,e.data)})),Array.from(o.values()).map((e=>({lij:[e.level,e.row,e.col],geometry:a.fromExtent(i(e.extent,this.view.spatialReference)),label:r(e.id)})))}fetchDebugInfo(){this.handle.getDebugInfo(null).then((e=>{this.debugInfo=e,this.update()}))}};e([o({constructOnly:!0})],d.prototype,\"handle\",void 0),d=e([s(\"esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger\")],d);export{d as WorkerTileTreeDebugger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import r from\"../../../../../core/Accessor.js\";import{property as t}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import s from\"../../../../../geometry/Point.js\";import{fromValues as i}from\"../../../../../geometry/support/aaBoundingRect.js\";import p from\"../../../../../layers/support/LOD.js\";import l from\"../../../../../layers/support/TileInfo.js\";let n=class extends r{constructor(e){super(e),this.pointOfInterest=null}get tiles(){return[{id:\"0/0/0\",level:0,row:0,col:0,extent:i(-1e8,-1e8,1e8,1e8)}]}get tileInfo(){return new l({origin:new s({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new p({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}get tileSize(){return this.tileInfo.size[0]}};e([t({readOnly:!0})],n.prototype,\"tiles\",null),e([t({readOnly:!0})],n.prototype,\"tileInfo\",null),e([t({readOnly:!0})],n.prototype,\"tileSize\",null),e([t({constructOnly:!0})],n.prototype,\"layer\",void 0),e([t()],n.prototype,\"pointOfInterest\",void 0),n=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple\")],n);export{n as FeatureServiceTilesSimple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import s from\"../../Color.js\";import o from\"../../Graphic.js\";import t from\"../../core/Accessor.js\";import{lerp as r}from\"../../core/mathUtils.js\";import{isSome as l,isNone as i}from\"../../core/maybe.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"../../symbols/PointSymbol3D.js\";import p from\"../../symbols/SimpleFillSymbol.js\";import c from\"../../symbols/TextSymbol.js\";import y from\"../../symbols/TextSymbol3DLayer.js\";const m=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let b=class extends t{constructor(e){super(e),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=m.map((e=>new p({color:[e[0],e[1],e[2],.6],outline:{color:\"black\",width:1}}))),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.update())}update(){if(!this._enabled)return void this.clear();const e=e=>{if(l(e.label))return e.label;let s=e.lij.toString();return l(e.loadPriority)&&(s+=` (${e.loadPriority})`),s},t=this.getTiles(),a=new Array,n=new Set((this._labels.size,this._labels.keys()));t.forEach(((p,m)=>{const b=p.lij.toString();n.delete(b);const d=p.lij[0],g=p.geometry;if(this.enablePolygons&&!this._polygons.has(b)){const e=new o({geometry:g,symbol:this._symbols[d%this._symbols.length]});this._polygons.set(b,e),a.push(e)}if(this.enableLabels){const n=e(p),d=m/(t.length-1),u=r(0,200,d),_=r(20,6,d)/.75,f=l(p.loadPriority)&&p.loadPriority>=t.length,w=new s([u,f?0:u,f?0:u]),j=\"3d\"===this.view.type?()=>new h({verticalOffset:{screenLength:40/.75},callout:{type:\"line\",color:\"white\",border:{color:\"black\"}},symbolLayers:[new y({text:n,halo:{color:\"white\",size:1/.75},material:{color:w},size:_})]}):()=>new c({text:n,haloColor:\"white\",haloSize:1/.75,color:w,size:_});if(this._labels.has(b)){const e=this._labels.get(b),s=j();(i(e.symbol)||JSON.stringify(s)!==JSON.stringify(e.symbol))&&(e.symbol=s)}else{const e=new o({geometry:g.extent.center,symbol:j()});this._labels.set(b,e),a.push(e)}}}));const p=new Array;n.forEach((e=>{this._polygons.has(e)&&(p.push(this._polygons.get(e)),this._polygons.delete(e)),this._labels.has(e)&&(p.push(this._labels.get(e)),this._labels.delete(e))})),this.view.graphics.removeMany(p),this.view.graphics.addMany(a)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};e([a({constructOnly:!0})],b.prototype,\"view\",void 0),e([a({readOnly:!0})],b.prototype,\"updating\",void 0),e([a()],b.prototype,\"enabled\",null),b=e([n(\"esri.views.support.TileTreeDebugger\")],b);export{b as TileTreeDebugger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../../../core/HandleOwner.js\";import{isSome as r,isNone as i}from\"../../../../../../core/maybe.js\";import{init as s}from\"../../../../../../core/watchUtils.js\";import{property as o}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/arrayUtils.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{distanceToTile as n}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";let a=class extends t{constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,t=this.effectivePointOfInterest;if(r(t)){const r=e.map((e=>n(t,e)));for(let i=1;i<r.length;i++)if(r[i-1]>r[i])return e.sort(((e,r)=>n(t,e)-n(t,r))),e.slice()}return e}get tilesCoveringView(){var e,t;return this.filterTiles(null==(e=this.view.featureTiles)||null==(t=e.tiles)?void 0:t.toArray()).map(u)}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tilingScheme.toTileInfo())?e:null}get tileSize(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tileSize)?e:256}get effectivePointOfInterest(){var e;const t=this.pointOfInterest;return r(t)?t:null==(e=this.view.pointsOfInterest)?void 0:e.focus.location}initialize(){this.handles.add(s(this.view,\"featureTiles\",(e=>{this.handles.remove(p),e&&this.handles.add(e.addClient(),p)})))}filterTiles(e){if(i(e))return[];return e.filter((e=>Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>c&&2===e.measures.visibility))}};function u({lij:[e,t,r],extent:i}){return{id:`${e}/${t}/${r}`,level:e,row:t,col:r,extent:i}}e([o({readOnly:!0})],a.prototype,\"tiles\",null),e([o({readOnly:!0})],a.prototype,\"tilesCoveringView\",null),e([o({readOnly:!0})],a.prototype,\"tileInfo\",null),e([o({readOnly:!0})],a.prototype,\"tileSize\",null),e([o({constructOnly:!0})],a.prototype,\"view\",void 0),e([o()],a.prototype,\"pointOfInterest\",void 0),e([o()],a.prototype,\"effectivePointOfInterest\",null),a=e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D\")],a);const c=50,p=\"feature-tiles\";export{a as FeatureServiceTiles3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clamp as n}from\"../../core/mathUtils.js\";import{isSome as t}from\"../../core/maybe.js\";import{g as r,k as c,f as o,n as e,d as u,c as i,a as f,b as s}from\"../../chunks/vec3.js\";import{c as a}from\"../../chunks/vec3f64.js\";import{g}from\"../../chunks/sphere.js\";import{sv4d as m,sv3d as h}from\"./vectorStacks.js\";function p(n=X){return[n[0],n[1],n[2],n[3]]}function M(n,t,r,c){return j(n,t,r,c,m.get())}function b(n,t=p()){return j(n[0],n[1],n[2],n[3],t)}function j(n,t,r,c,o=p()){return o[0]=n,o[1]=t,o[2]=r,o[3]=c,o}function k(n,t,c){return r(c,n),c[3]=t,c}function v(n,t,r){const c=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],o=Math.abs(c-1)>1e-5&&c>1e-12?1/Math.sqrt(c):1;return r[0]=t[0]*o,r[1]=t[1]*o,r[2]=t[2]*o,r[3]=-(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]),r}function y(n,t,r,c=p()){const o=r[0]-t[0],e=r[1]-t[1],u=r[2]-t[2],i=n[0]-t[0],f=n[1]-t[1],s=n[2]-t[2],a=e*s-u*f,g=u*i-o*s,m=o*f-e*i,h=a*a+g*g+m*m,M=Math.abs(h-1)>1e-5&&h>1e-12?1/Math.sqrt(h):1;c[0]=a*M,c[1]=g*M,c[2]=m*M,c[3]=-(c[0]*n[0]+c[1]*n[1]+c[2]*n[2])}function d(n,t){return l(n,t,0,1,2)}function l(n,t,r,i,f){if(n.count<3)return!1;n.getVec(r,q);let s=i,a=!1;for(;s<n.count-1&&!a;)n.getVec(s,x),s++,a=!c(q,x);if(!a)return!1;for(s=Math.max(s,f),a=!1;s<n.count&&!a;)n.getVec(s,S),s++,o(U,q,x),e(U,U),o(w,x,S),e(w,w),a=!c(q,S)&&!c(x,S)&&Math.abs(u(U,w))<V;return a?(y(q,x,S,t),!0):(0!==r||1!==i||2!==f)&&l(n,t,0,1,2)}const V=.99619469809,q=a(),x=a(),S=a(),U=a(),w=a();function z(n,t,r){return n!==r&&b(n,r),r[3]=-u(W(r),t),r}function A(n,t){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function B(n,t,r,c){return i(S,t,n),v(r,S,c)}function C(n,t,r,c){return T(n,t,o(h.get(),r,t),Y,c)}function D(n,r,c){return!!t(r)&&T(n,r.origin,r.direction,Z,c)}function E(n,t,r){return T(n,t.origin,t.vector,0,r)}function F(n,t,r){return T(n,t.origin,t.vector,1,r)}function G(n,t){return R(n,g(t))-t[3]>=0}function H(n,t){return R(n,g(t))+t[3]<0}function I(n,t){return R(n,t)>=0}function J(n,t){return R(n,t)<0}function K(n,t){const r=t[0],c=t[1],o=t[2],e=t[3],u=t[4],i=t[5];return n[0]*(n[0]>0?r:e)+n[1]*(n[1]>0?c:u)+n[2]*(n[2]>0?o:i)+n[3]>=0}function L(n,t){const r=u(W(n),t.ray.direction),c=-R(n,t.ray.origin);if(c<0&&r>=0)return!1;if(r>-1e-6&&r<1e-6)return c>0;if((c<0||r<0)&&!(c<0&&r<0))return!0;const o=c/r;return r>0?o<t.c1&&(t.c1=o):o>t.c0&&(t.c0=o),t.c0<=t.c1}function N(n,t){const r=u(W(n),t.ray.direction),c=-R(n,t.ray.origin);if(r>-1e-6&&r<1e-6)return c>0;const o=c/r;return r>0?o<t.c1&&(t.c1=o):o>t.c0&&(t.c0=o),t.c0<=t.c1}function O(n,t,r){const c=f(h.get(),W(n),-n[3]),e=P(n,o(h.get(),t,c),h.get());return s(r,e,c),r}function P(n,t,r){const c=f(h.get(),W(n),u(W(n),t));return o(r,t,c),r}function Q(n,t){return Math.abs(R(n,t))}function R(n,t){return u(W(n),t)+n[3]}function T(t,r,c,o,e){const i=u(W(t),c);if(0===i)return!1;let a=-(u(W(t),r)+t[3])/i;return 1&o&&(a=n(a,0,1)),!(!(4&o)&&a<0||!(8&o)&&a>1)&&(s(e,r,f(e,c,a)),!0)}function W(n){return n}const X=[0,0,1,0],Y=12,Z=8;export{X as UP,L as clip,N as clipInfinite,b as copy,p as create,Q as distance,d as fromManyPoints,l as fromManyPointsSampleAt,k as fromNormalAndOffset,y as fromPoints,v as fromPositionAndNormal,j as fromValues,B as fromVectorsAndPoint,C as intersectLine,E as intersectLineSegment,F as intersectLineSegmentClamp,D as intersectRay,K as isAABBFullyInside,I as isPointInside,J as isPointOutside,G as isSphereFullyInside,H as isSphereFullyOutside,A as negate,W as normal,O as projectPoint,P as projectVector,z as setOffsetFromPoint,R as signedDistance,M as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import t from\"../../../../../../core/Accessor.js\";import{HandleOwnerMixin as r}from\"../../../../../../core/HandleOwner.js\";import{isSome as i,isNone as o}from\"../../../../../../core/maybe.js\";import{property as s}from\"../../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../../core/arrayUtils.js\";import\"../../../../../../core/has.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import{distanceToTile as n}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";import{scaleBoundsPredicate as a}from\"../../../../../support/layerViewUtils.js\";let c=class extends(r(t)){constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,t=i(this.pointOfInterest)?this.pointOfInterest:this.view.center;return e.sort(((e,r)=>n(t,e)-n(t,r))),e}scaleEnabled(){return a(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}get tilesCoveringView(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||o(this.tileInfo))return[];if(!this.scaleEnabled)return[];const{spans:e,lodInfo:t}=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),{level:r}=t,i=[];for(const{row:o,colFrom:s,colTo:l}of e)for(let e=s;e<=l;e++){const s={id:null,level:r,row:o,col:t.normalizeCol(e)};this.tileInfo.updateTileInfo(s),i.push(s)}return i}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featuresTilingScheme)?void 0:t.tileInfo)?e:null}get tileSize(){return i(this.tileInfo)?this.tileInfo.size[0]:256}initialize(){this.handles.add(this.watch(\"view.state.viewpoint\",(()=>this.notifyChange(\"tilesCoveringView\")),!0))}};e([s({readOnly:!0})],c.prototype,\"tiles\",null),e([s({readOnly:!0})],c.prototype,\"scaleEnabled\",null),e([s({readOnly:!0})],c.prototype,\"tilesCoveringView\",null),e([s({readOnly:!0})],c.prototype,\"tileInfo\",null),e([s({readOnly:!0})],c.prototype,\"tileSize\",null),e([s({constructOnly:!0})],c.prototype,\"view\",void 0),e([s({constructOnly:!0})],c.prototype,\"layer\",void 0),e([s()],c.prototype,\"pointOfInterest\",void 0),c=e([l(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D\")],c);export{c as FeatureServiceTiles2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{objectEqual as t}from\"../snappingUtils.js\";import{SnappingHint as n}from\"./SnappingHint.js\";class s extends n{constructor(t){super(),this.point=t}equals(n){return n instanceof s&&t(this.point,n.point)}}export{s as PointSnappingHint};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import r from\"../../../../core/Accessor.js\";import{HandleOwnerMixin as t}from\"../../../../core/HandleOwner.js\";import{destroyHandle as i}from\"../../../../core/handleUtils.js\";import{isSome as s}from\"../../../../core/maybe.js\";import{react as a,sync as o,initial as n}from\"../../../../core/reactiveUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as u}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{FeatureServiceTiles2D as c}from\"../../../2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js\";import{FeatureServiceTiles3D as d}from\"../../../3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js\";import{convertSnappingCandidate as p}from\"./queryEngineUtils.js\";import{WorkerTileTreeDebugger as h}from\"./WorkerTileTreeDebugger.js\";import{FeatureServiceSnappingSourceWorkerHandle as f}from\"./featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js\";import{FeatureServiceTilesSimple as m}from\"./featureServiceSource/FeatureServiceTilesSimple.js\";import y from\"../../../support/debugFlags.js\";let g=class extends(t(r)){constructor(e){super(e)}get updateTilesParameters(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}get updating(){return this.workerHandle.updating||this.updatingHandles.updating}get configuration(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}get availability(){return this.workerHandle.availability}get layer(){return this.layerSource.layer}initialize(){const e=this.view;if(s(e))switch(e.type){case\"2d\":this.tilesOfInterest=new c({view:e,layer:this.layer}),this.workerHandle=new f;break;case\"3d\":{const r=e.resourceController;this.tilesOfInterest=new d({view:e}),this.workerHandle=new f({schedule:e=>r.schedule(e)});break}}else this.tilesOfInterest=new m({layer:this.layer}),this.workerHandle=new f;this.handles.add([i(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add(this,\"updateTilesParameters\",(()=>this.workerHandle.updateTiles(this.updateTilesParameters,null)),2),this.handles.add([a((()=>this.configuration),(e=>this.workerHandle.configure(e,null)),o)]),s(e)&&this.handles.add(a((()=>y.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES),(r=>{r&&!this.debug?(this.debug=new h({view:e,handle:this.workerHandle}),this.handles.add(i(this.debug),\"debug\")):!r&&this.debug&&this.handles.remove(\"debug\")}),n)),this.handles.add(this.layerSource.layer.on(\"apply-edits\",(e=>{this.workerHandle.applyEdits(e,null)})))}refresh(){this.workerHandle.refresh(null)}async fetchCandidates(e,r){return this.tilesOfInterest.pointOfInterest=e.coordinateHelper.vectorToPoint(e.point),(await this.workerHandle.fetchCandidates({...e,filter:null},r)).candidates.map((r=>p(r,e.coordinateHelper)))}getDebugInfo(e){return this.workerHandle.getDebugInfo(e)}};e([l({constructOnly:!0})],g.prototype,\"spatialReference\",void 0),e([l({constructOnly:!0})],g.prototype,\"layerSource\",void 0),e([l({constructOnly:!0})],g.prototype,\"view\",void 0),e([l()],g.prototype,\"tilesOfInterest\",void 0),e([l({readOnly:!0})],g.prototype,\"updateTilesParameters\",null),e([l({readOnly:!0})],g.prototype,\"updating\",null),e([l({readOnly:!0})],g.prototype,\"configuration\",null),e([l({readOnly:!0})],g.prototype,\"availability\",null),g=e([u(\"esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource\")],g);export{g as FeatureServiceSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{g as n,f as o,d as i,a as e,b as c,p as u,h as s}from\"../../chunks/vec3.js\";import{a,c as g}from\"../../chunks/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:a(t.origin),vector:a(t.vector)}:{origin:g(),vector:g()}}function p(t,r){const n=x.get();return n.origin=t,n.vector=r,n}function h(t,r=v()){return m(t.origin,t.vector,r)}function m(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function l(t,r,i=v()){return n(i.origin,t),o(i.vector,r,t),i}function b(r,n){const c=o(f.get(),n,r.origin),u=i(r.vector,c),s=i(r.vector,r.vector),a=t(u/s,0,1),g=o(f.get(),e(f.get(),r.vector,a),c);return i(g,g)}function M(t,r){return Math.sqrt(b(t,r))}function d(t,r,n){return A(t,r,0,1,n)}function j(t,r,n){return c(n,t.origin,e(n,t.vector,r))}function A(r,n,s,a,g){const{vector:v,origin:p}=r,h=o(f.get(),n,p),m=i(v,h)/u(v);return e(g,v,t(m,s,a)),c(g,g,r.origin)}function B(t,r){if(q(t,p(r.origin,r.direction),!1,w)){const{tA:r,pB:n,distance2:o}=w;if(r>=0&&r<=1)return o;if(r<0)return s(t.origin,n);if(r>1)return s(c(f.get(),t.origin,t.vector),n)}return null}function k(t,r,o){return!!q(t,r,!0,w)&&(n(o,w.pA),!0)}function S(t,r){return q(t,r,!0,w)?w.distance2:null}function q(r,n,o,i){const e=1e-6,u=r.origin,a=c(f.get(),u,r.vector),g=n.origin,v=c(f.get(),g,n.vector),p=f.get(),h=f.get();if(p[0]=u[0]-g[0],p[1]=u[1]-g[1],p[2]=u[2]-g[2],h[0]=v[0]-g[0],h[1]=v[1]-g[1],h[2]=v[2]-g[2],Math.abs(h[0])<e&&Math.abs(h[1])<e&&Math.abs(h[2])<e)return!1;const m=f.get();if(m[0]=a[0]-u[0],m[1]=a[1]-u[1],m[2]=a[2]-u[2],Math.abs(m[0])<e&&Math.abs(m[1])<e&&Math.abs(m[2])<e)return!1;const l=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],b=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],M=p[0]*m[0]+p[1]*m[1]+p[2]*m[2],d=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],j=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*d-b*b;if(Math.abs(j)<e)return!1;let A=(l*b-M*d)/j,B=(l+b*A)/d;o&&(A=t(A,0,1),B=t(B,0,1));const k=f.get(),S=f.get();return k[0]=u[0]+A*m[0],k[1]=u[1]+A*m[1],k[2]=u[2]+A*m[2],S[0]=g[0]+B*h[0],S[1]=g[1]+B*h[1],S[2]=g[2]+B*h[2],i.tA=A,i.tB=B,i.pA=k,i.pB=S,i.distance2=s(k,S),!0}const w={tA:0,tB:0,pA:g(),pB:g(),distance2:0},x=new r((()=>({origin:null,vector:null})));export{S as closestLineSegmentDistance2,k as closestLineSegmentPoint,B as closestRayDistance2,h as copy,v as create,M as distance,b as distance2,l as fromPoints,m as fromValues,j as pointAt,d as projectPoint,A as projectPointClamp,p as wrap};\n"],"sourceRoot":"webpack:///"}