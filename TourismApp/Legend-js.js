(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["Legend-js"],{

/***/ "3Qvx":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/support/colorRampUtils.js ***!
  \****************************************************************************/
/*! exports provided: getColorFromPointCloudStops, getRampStops, getRampStopsForPointCloud, getStrectchRampStops */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getColorFromPointCloudStops", function() { return u; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRampStops", function() { return r; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRampStopsForPointCloud", function() { return a; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStrectchRampStops", function() { return i; });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Color.js */ "nvBr");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ "3lco");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const o=new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"]([64,64,64]);function n(l,o){const n=[],r=l.length-1;return 5===l.length?n.push(0,2,4):n.push(0,r),l.map(((l,t)=>n.indexOf(t)>-1?Object(_utils_js__WEBPACK_IMPORTED_MODULE_1__["createStopLabel"])(l,t,r,o):null))}async function r(l,e,o){let r=!1,a=[],u=[];if(l.stops){const e=l.stops;a=e.map((l=>l.value)),r=e.some((l=>!!l.label)),r&&(u=e.map((l=>l.label)))}const s=a[0],i=a[a.length-1];if(null==s&&null==i)return null;const c=r?null:n(a,o);return(await Promise.all(a.map((async(o,n)=>({value:o,color:"opacity"===l.type?await t(o,l,e):(await Promise.resolve(/*! import() */).then(__webpack_require__.bind(null, /*! ../../../renderers/visualVariables/support/visualVariableUtils.js */ "0pea"))).getColor(l,o),label:r?u[n]:c[n]}))))).reverse()}async function t(e,n,r=o){const t=new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](r),a=(await Promise.resolve(/*! import() */).then(__webpack_require__.bind(null, /*! ../../../renderers/visualVariables/support/visualVariableUtils.js */ "0pea"))).getOpacity(n,e);return null!=a&&(t.a=a),t}function a(l){let e=!1,o=[],r=[];o=l.map((l=>l.value)),e=l.some((l=>!!l.label)),e&&(r=l.map((l=>l.label)));const t=o[0],a=o[o.length-1];if(null==t&&null==a)return null;const s=e?null:n(o,!1);return o.map(((o,n)=>({value:o,color:u(o,l),label:e?r[n]:s[n]}))).reverse()}function u(e,o){const{startIndex:n,endIndex:r,weight:t}=s(e,o);if(n===r)return o[n].color;const a=_Color_js__WEBPACK_IMPORTED_MODULE_0__["default"].blendColors(o[n].color,o[r].color,t);return new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](a)}function s(l,e){let o=0,n=e.length-1;return e.some(((e,r)=>l<e.value?(n=r,!0):(o=r,!1))),{startIndex:o,endIndex:n,weight:(l-e[o].value)/(e[n].value-e[o].value)}}function i(e,o){let n=[];if(e&&"multipart"===e.type)e.colorRamps.reverse().forEach((function(r,t){0===t?n.push({value:o.max,color:new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](r.toColor),label:"high"}):n.push({value:null,color:new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](r.toColor),label:""}),t===e.colorRamps.length-1?n.push({value:o.min,color:new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](r.fromColor),label:"low"}):n.push({value:null,color:new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](r.fromColor),label:""})}));else{let r,t;e&&"algorithmic"===e.type?(r=e.fromColor,t=e.toColor):(r=[0,0,0,1],t=[255,255,255,1]),n=[{value:o.max,color:new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](t),label:"high"},{value:o.min,color:new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](r),label:"low"}]}return n}


/***/ }),

/***/ "3lco":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/support/utils.js ***!
  \*******************************************************************/
/*! exports provided: RGB_IMG_SOURCE, SPECIAL_CHARS_GREATER_THAN, SPECIAL_CHARS_LESS_THAN, createStopLabel */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RGB_IMG_SOURCE", function() { return e; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SPECIAL_CHARS_GREATER_THAN", function() { return w; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SPECIAL_CHARS_LESS_THAN", function() { return g; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createStopLabel", function() { return U; });
/* harmony import */ var _intl_date_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../intl/date.js */ "RlM3");
/* harmony import */ var _renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../renderers/support/numberUtils.js */ "C3sy");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g="<",w=">",I=Object(_intl_date_js__WEBPACK_IMPORTED_MODULE_0__["convertDateFormatToIntlOptions"])("short-date");function U(a,U,e,i){let o="";0===U?o=`${g} `:U===e&&(o=`${w} `);let r=null;return r=i?Object(_intl_date_js__WEBPACK_IMPORTED_MODULE_0__["formatDate"])(a,I):Object(_renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_1__["format"])(a),o+r}const e=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];


/***/ }),

/***/ "7BpC":
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/renderers/support/utils.js ***!
  \**************************************************************/
/*! exports provided: calculateDateFormatInterval, createClassBreakLabel, createColorStops, createUniqueValueLabel, getAttribute, getAttributes, setLabelsForClassBreaks, timelineDateFormatOptions, updateClassBreak, updateColorStops */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "calculateDateFormatInterval", function() { return x; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createClassBreakLabel", function() { return h; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createColorStops", function() { return c; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createUniqueValueLabel", function() { return V; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAttribute", function() { return b; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getAttributes", function() { return k; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setLabelsForClassBreaks", function() { return y; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "timelineDateFormatOptions", function() { return m; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateClassBreak", function() { return g; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "updateColorStops", function() { return p; });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "tQ+6");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Logger.js */ "6S2I");
/* harmony import */ var _intl_date_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../intl/date.js */ "RlM3");
/* harmony import */ var _numberUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./numberUtils.js */ "C3sy");
/* harmony import */ var _visualVariables_support_ColorStop_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../visualVariables/support/ColorStop.js */ "P2CQ");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const r=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.renderers.support.utils"),s={lte:"<=",gte:">=",lt:"<",gt:">",pct:"%",ld:"â€“"},u={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},d={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"},m=Object(_intl_date_js__WEBPACK_IMPORTED_MODULE_2__["convertDateFormatToIntlOptions"])("short-date");function f(e,n,t){let l="";return 0===n?l=s.lt+" ":n===t&&(l=s.gt+" "),l+e}function c(e){const{values:n,colors:t,labelIndexes:i,isDate:r,dateFormatOptions:s}=e;return n.map(((e,u)=>{let d=null;if(!i||i.indexOf(u)>-1){let t;t=r?Object(_intl_date_js__WEBPACK_IMPORTED_MODULE_2__["formatDate"])(e,s):Object(_numberUtils_js__WEBPACK_IMPORTED_MODULE_3__["format"])(e),t&&(d=f(t,u,n.length-1))}return new _visualVariables_support_ColorStop_js__WEBPACK_IMPORTED_MODULE_4__["default"]({value:e,color:t[u],label:d})}))}function p(e){const{stops:n,changes:t,isDate:o,dateFormatOptions:r}=e,s=n.map((e=>e.value)),u=[];for(const l of t)u.push(l.index),s[l.index]=l.value;const d=Object(_numberUtils_js__WEBPACK_IMPORTED_MODULE_3__["round"])(s,{indexes:u});n.forEach(((e,t)=>{if(e.value=s[t],null!=e.label){let i,s=null;i=o?Object(_intl_date_js__WEBPACK_IMPORTED_MODULE_2__["formatDate"])(d[t],r):Object(_numberUtils_js__WEBPACK_IMPORTED_MODULE_3__["format"])(d[t]),i&&(s=f(i,t,n.length-1)),e.label=s}}))}function h(e){let n=e.minValue,t=e.maxValue;const l=e.isFirstBreak?"":s.gt+" ",i="percent-of-total"===e.normalizationType?s.pct:"";return n=null==n?"":Object(_numberUtils_js__WEBPACK_IMPORTED_MODULE_3__["format"])(n),t=null==t?"":Object(_numberUtils_js__WEBPACK_IMPORTED_MODULE_3__["format"])(t),l+n+i+" "+s.ld+" "+t+i}function y(e){const n=e.classBreakInfos,t=e.normalizationType;let l=[];if(n&&n.length)if("standard-deviation"!==e.classificationMethod)if(e.round){l.push(n[0].minValue);for(const e of n)l.push(e.maxValue);l=Object(_numberUtils_js__WEBPACK_IMPORTED_MODULE_3__["round"])(l),n.forEach(((e,n)=>{e.label=h({minValue:0===n?l[0]:l[n],maxValue:l[n+1],isFirstBreak:0===n,normalizationType:t})}))}else n.forEach(((e,n)=>{e.label=h({minValue:e.minValue,maxValue:e.maxValue,isFirstBreak:0===n,normalizationType:t})}));else r.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.")}function g(e){if("standard-deviation"===e.classificationMethod)return void r.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");const n=e.classBreaks,t=e.change,l=t.index,a=t.value,i=n.length;let o=-1,s=-1;0===l?o=l:l===i?s=l-1:(s=l-1,o=l);const u=e.normalizationType;let d=null;o>-1&&o<i&&(d=n[o],d.minValue=a,d.label=h({minValue:d.minValue,maxValue:d.maxValue,isFirstBreak:0===o,normalizationType:u})),s>-1&&s<i&&(d=n[s],d.maxValue=a,d.label=h({minValue:d.minValue,maxValue:d.maxValue,isFirstBreak:0===s,normalizationType:u}))}function x(e){const n=e.map((e=>new Date(e))),t=n.length;let l=1/0,a=null;for(let i=0;i<t-1;i++){const e=n[i];let o=1/0,r=null;for(let l=i+1;l<t;l++){const t=n[l],a=(e.getFullYear()!==t.getFullYear()?"year":e.getMonth()!==t.getMonth()&&"month")||e.getDate()!==t.getDate()&&"day"||e.getHours()!==t.getHours()&&"hour"||e.getMinutes()!==t.getMinutes()&&"minute"||e.getSeconds()!==t.getSeconds()&&"second"||"millisecond",i=u[a];i<o&&(o=i,r=a)}o<l&&(l=o,a=r)}return a}function V(e){const{value:n,domain:i,fieldInfo:o,dateFormatInterval:r}=e;let s=String(n);const u=i&&"codedValues"in i&&i.codedValues?i.getName(n):null;return u?s=u:"number"==typeof n&&(s=o&&"date"===o.type?Object(_intl_date_js__WEBPACK_IMPORTED_MODULE_2__["formatDate"])(n,r&&Object(_intl_date_js__WEBPACK_IMPORTED_MODULE_2__["convertDateFormatToIntlOptions"])(d[r])):Object(_numberUtils_js__WEBPACK_IMPORTED_MODULE_3__["format"])(n)),s}function b(e,n){return"normalizationField"in e&&e.normalizationField?F(e.field,e.normalizationField):"field"in e&&e.field?v(e.field):"valueExpression"in e&&e.valueExpression?z(e.valueExpression,e.valueExpressionTitle,n):null}function v(e){return{type:"field",field:e}}function F(e,n){return{type:"normalized-field",field:e,normalizationField:n}}function z(e,n,t){return{type:"expression",expression:e,title:n,returnType:t}}function k(n,t){const l=[];if("class-breaks"===n.type||"heatmap"===n.type)l.push(b(n,"number"));else if("unique-value"===n.type){const e=n.authoringInfo;if(e&&"relationship"===e.type){if(e.field1&&e.field2){const n=e.field1.field,t=e.field2.field,a=e.field1.normalizationField,i=e.field2.normalizationField;l.push(b({field:n,normalizationField:a})),l.push(b({field:t,normalizationField:i}))}}else{const e=n.uniqueValueInfos[0];let t=null;if(e&&e.value){const e=typeof n.uniqueValueInfos[0].value;"string"!==e&&"number"!==e||(t=e)}l.push(b(n,t)),[n.field2,n.field3].forEach((e=>e&&l.push(v(e))))}}else"dot-density"===n.type&&n.attributes.forEach((e=>l.push(b(e,"number"))));const a=t?t(n):"visualVariables"in n?n.visualVariables:null;return a&&a.forEach((e=>l.push(b(e,"number")))),Object(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__["unique"])(l.filter(Boolean),((e,n)=>"field"===e.type&&"field"===n.type?e.field===n.field:"normalized-field"===e.type&&"normalized-field"===n.type?e.field===n.field&&e.normalizationField===n.normalizationField:"expression"===e.type&&"expression"===n.type&&e.expression===n.expression))}


/***/ }),

/***/ "AybS":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/effects/EffectView.js ***!
  \****************************************************************/
/*! exports provided: canInterpolateEffectStops, convertEffectToStops, default, normalizeEffectStops */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "canInterpolateEffectStops", function() { return p; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "convertEffectToStops", function() { return _; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return u; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalizeEffectStops", function() { return m; });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "pO5D");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Accessor.js */ "/CmD");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/has.js */ "wSAH");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/lang.js */ "f/qv");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/Logger.js */ "6S2I");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "WbKI");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "zqDF");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "04ZG");
/* harmony import */ var _parser_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./parser.js */ "uQxk");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./utils.js */ "IvE/");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const a=-1;let h=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(t){super(t),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=Object(_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("mapview-transitions-duration"),this.effects=[]}set effect(t){if(this._get("effect")!==(t=t||"")){this._set("effect",t);try{this._transitionTo(_(t))}catch(e){this._transitionTo([]),_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this.declaredClass).warn("Invalid Effect",{effect:t,error:e})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(t){this._updateForScale(t)}get transitioning(){return null!==this._to}canTransitionTo(t){try{return this.scale>0&&p(this._current,_(t),this.scale)}catch{return!1}}transitionStep(t,e){this._applyTimeTransition(t),this._updateForScale(e)}end(){this._applyTimeTransition(this.duration)}_transitionTo(t){this.scale>0&&p(this._current,t,this.scale)?(this._final=t,this._to=Object(_core_lang_js__WEBPACK_IMPORTED_MODULE_3__["clone"])(t),m(this._current,this._to,this.scale),this._from=Object(_core_lang_js__WEBPACK_IMPORTED_MODULE_3__["clone"])(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=t),this._set("effects",this._current[0]?Object(_core_lang_js__WEBPACK_IMPORTED_MODULE_3__["clone"])(this._current[0].effects):[])}_applyTimeTransition(t){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=t;const e=Math.min(1,this._time/this.duration);for(let s=0;s<this._current.length;s++){const t=this._current[s],r=this._from[s],i=this._to[s];t.scale=g(r.scale,i.scale,e);for(let s=0;s<t.effects.length;s++){const n=t.effects[s],c=r.effects[s],o=i.effects[s];n.interpolate(c,o,e)}}1===e&&(this._current=this._final,this._set("effects",this._current[0]?Object(_core_lang_js__WEBPACK_IMPORTED_MODULE_3__["clone"])(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(t){if(this._set("scale",t),0===this._current.length)return;const e=this._current,s=this._current.length-1;let r,i,n=1;if(1===e.length||t>=e[0].scale)i=r=e[0].effects;else if(t<=e[s].scale)i=r=e[s].effects;else for(let c=0;c<s;c++){const s=e[c],o=e[c+1];if(s.scale>=t&&o.scale<=t){n=(t-s.scale)/(o.scale-s.scale),r=s.effects,i=o.effects;break}}for(let c=0;c<this.effects.length;c++){this.effects[c].interpolate(r[c],i[c],n)}}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__["property"])()],h.prototype,"_to",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__["property"])()],h.prototype,"duration",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__["property"])({value:""})],h.prototype,"effect",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__["property"])({readOnly:!0})],h.prototype,"effects",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__["property"])({readOnly:!0})],h.prototype,"hasEffects",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__["property"])({value:0})],h.prototype,"scale",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__["property"])({readOnly:!0})],h.prototype,"transitioning",null),h=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__["subclass"])("esri.layers.effects.EffectView")],h);const u=h;function _(t){const e=Object(_parser_js__WEBPACK_IMPORTED_MODULE_8__["parse"])(t)||[];return d(e)?[{scale:a,effects:e}]:e}function p(t,e,s){var r,i,n,c;if(null==(r=t[0])||!r.effects||null==(i=e[0])||!i.effects)return!0;return!(((null==(n=t[0])?void 0:n.scale)===a||(null==(c=e[0])?void 0:c.scale)===a)&&(t.length>1||e.length>1)&&s<=0)&&Object(_utils_js__WEBPACK_IMPORTED_MODULE_9__["canInterpolateEffects"])(t[0].effects,e[0].effects)}function m(t,e,s){var r,i;const n=t.length>e.length?t:e,c=t.length>e.length?e:t,o=c[c.length-1],l=null!=(r=null==o?void 0:o.scale)?r:s,h=null!=(i=null==o?void 0:o.effects)?i:[];for(let f=c.length;f<n.length;f++)c.push({scale:l,effects:[...h]});for(let u=0;u<n.length;u++)c[u].scale=c[u].scale===a?s:c[u].scale,n[u].scale=n[u].scale===a?s:n[u].scale,Object(_utils_js__WEBPACK_IMPORTED_MODULE_9__["normalizeEffects"])(c[u].effects,n[u].effects)}function g(t,e,s){return t+(e-t)*s}function d(t){const e=t[0];return!!e&&"type"in e}


/***/ }),

/***/ "C3sy":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/renderers/support/numberUtils.js ***!
  \********************************************************************/
/*! exports provided: format, numDigits, percentChange, round */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "format", function() { return c; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "numDigits", function() { return i; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "percentChange", function() { return l; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "round", function() { return u; });
/* harmony import */ var _intl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../intl.js */ "G48n");
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../intl/number.js */ "IeLS");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const n=/^-?(\d+)(\.(\d+))?$/i;function e(t,n){return t-n}function r(t,n){let e,r;return e=Number(t.toFixed(n)),e<t?r=e+1/10**n:(r=e,e-=1/10**n),e=Number(e.toFixed(n)),r=Number(r.toFixed(n)),[e,r]}function o(t,n,e,r,o){const i=l(t,n,e,r),u=null==i.previous||i.previous<=o,s=null==i.next||i.next<=o;return u&&s||i.previous+i.next<=2*o}function i(t){const e=String(t),r=e.match(n);if(r&&r[1])return{integer:r[1].split("").length,fractional:r[3]?r[3].split("").length:0};if(e.toLowerCase().indexOf("e")>-1){const t=e.split("e"),n=t[0],r=t[1];if(n&&r){const t=Number(n);let e=Number(r);const o=e>0;o||(e=Math.abs(e));const l=i(t);return o?(l.integer+=e,e>l.fractional?l.fractional=0:l.fractional-=e):(l.fractional+=e,e>l.integer?l.integer=1:l.integer-=e),l}}return{integer:0,fractional:0}}function l(t,n,e,r){const o={previous:null,next:null};if(null!=e){const r=t-e,i=n-e-r;o.previous=Math.floor(Math.abs(100*i/r))}if(null!=r){const e=r-t,i=r-n-e;o.next=Math.floor(Math.abs(100*i/e))}return o}function u(t,n={}){const l=t.slice(0),{tolerance:u=2,strictBounds:s=!1,indexes:c=l.map(((t,n)=>n))}=n;c.sort(e);for(let e=0;e<c.length;e++){const t=c[e],n=l[t],a=0===t?null:l[t-1],f=t===l.length-1?null:l[t+1],m=i(n).fractional;if(m){let i,c=0,g=!1;for(;c<=m&&!g;){const t=r(n,c);i=s&&0===e?t[1]:t[0],g=o(n,i,a,f,u),c++}g&&(l[t]=i)}}return l}const s={maximumFractionDigits:20};function c(n){return Object(_intl_number_js__WEBPACK_IMPORTED_MODULE_1__["formatNumber"])(n,s)}


/***/ }),

/***/ "EIZL":
/*!**************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/styles/support/relationshipUtils.js ***!
  \**************************************************************************************/
/*! exports provided: renderRelationshipRamp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "renderRelationshipRamp", function() { return b; });
/* harmony import */ var _symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../symbols/support/svgUtils.js */ "7wGN");
/* harmony import */ var _symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../symbols/support/utils.js */ "rI4C");
/* harmony import */ var _support_widgetUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/widgetUtils.js */ "cCpn");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/has.js */ "wSAH");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/Logger.js */ "6S2I");
/* harmony import */ var _support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../support/jsxFactory.js */ "2CIP");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const m="http://www.w3.org/2000/svg",u={diamondContainer:"esri-relationship-ramp--diamond__container",diamondLeftCol:"esri-relationship-ramp--diamond__left-column",diamondRightCol:"esri-relationship-ramp--diamond__right-column",diamondMidCol:"esri-relationship-ramp--diamond__middle-column",diamondMidColLabel:"esri-relationship-ramp--diamond__middle-column--label",diamondMidColRamp:"esri-relationship-ramp--diamond__middle-column--ramp",squareTable:"esri-relationship-ramp--square__table",squareTableRow:"esri-relationship-ramp--square__table-row",squareTableCell:"esri-relationship-ramp--square__table-cell",squareTableLabel:"esri-relationship-ramp--square__table-label",squareTableLabelLeftBottom:"esri-relationship-ramp--square__table-label--left-bottom",squareTableLabelRightBottom:"esri-relationship-ramp--square__table-label--right-bottom",squareTableLabelLeftTop:"esri-relationship-ramp--square__table-label--left-top",squareTableLabelRightTop:"esri-relationship-ramp--square__table-label--right-top"};function b(e,a,r,l){const{focus:s,labels:t}=e,i=!!s,o=c(e,a,r,l);return i?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.diamondContainer},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.diamondLeftCol},t.left),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.diamondMidCol},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.diamondMidColLabel},t.top),o,Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.diamondMidColLabel},t.bottom)),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.diamondRightCol},t.right)):Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.squareTable},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.squareTableRow},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:Object(_support_widgetUtils_js__WEBPACK_IMPORTED_MODULE_2__["classes"])(u.squareTableCell,u.squareTableLabel,u.squareTableLabelRightBottom)},t.left),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.squareTableCell}),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:Object(_support_widgetUtils_js__WEBPACK_IMPORTED_MODULE_2__["classes"])(u.squareTableCell,u.squareTableLabel,u.squareTableLabelLeftBottom)},t.top)),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.squareTableRow},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.squareTableCell}),o,Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.squareTableCell})),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.squareTableRow},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:Object(_support_widgetUtils_js__WEBPACK_IMPORTED_MODULE_2__["classes"])(u.squareTableCell,u.squareTableLabel,u.squareTableLabelRightTop)},t.bottom),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:u.squareTableCell}),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{class:Object(_support_widgetUtils_js__WEBPACK_IMPORTED_MODULE_2__["classes"])(u.squareTableCell,u.squareTableLabel,u.squareTableLabelLeftTop)},t.right)))}function p(e,a,r){const l=`${r}_arrowStart`,s=`${r}_arrowEnd`,t="left"===e,i={markerStart:null,markerEnd:null};switch(a){case"HL":t?i.markerStart=`url(#${s})`:i.markerEnd=`url(#${l})`;break;case"LL":i.markerStart=`url(#${s})`;break;case"LH":t?i.markerEnd=`url(#${l})`:i.markerStart=`url(#${s})`;break;default:i.markerEnd=`url(#${l})`}return i}function c(n,b,c,h,f=60){const{focus:q,numClasses:k,colors:T,rotation:_}=n,L=!!q,g=Math.sqrt(f**2+f**2)+(L?0:5),C=[],v=[],w=[],y=(f||75)/k;for(let t=0;t<k;t++){const i=t*y;for(let o=0;o<k;o++){const n=o*y,d=Object(_symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_0__["generateFillAttributes"])(T[t][o]),m=Object(_symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_0__["generateStrokeAttributes"])(null),u={type:"rect",x:n,y:i,width:y,height:y};C.push(Object(_symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_0__["renderDef"])(d)),v.push(Object(_symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_0__["renderShape"])(u,d.fill,m,null)),w.push(Object(_symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_0__["getBoundingBox"])(u))}}const x=10,R=15,$=15,E=10;let M=null;L||(M="margin: -15px -15px -18px -15px");const S=p("left",q,b),j=p("right",q,b),B=Object(_symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_0__["computeBBox"])(w),H=Object(_symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_0__["getTransformMatrix"])(B,g,g,0,!1,_,!1),U=Object(_symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_0__["getTransformMatrix"])(B,g,g,0,!1,L?-45:null,!1),W={filter:Object(_symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_1__["getCSSFilterFromEffectList"])(h),opacity:null==c?null:`${c}`};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("div",{styles:W,class:L?u.diamondMidColRamp:u.squareTableCell},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("svg",{xmlns:m,width:g,height:g,style:M},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("defs",null,Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("marker",{id:`${b}_arrowStart`,markerWidth:"10",markerHeight:"10",refX:"5",refY:"5",markerUnits:"strokeWidth",orient:"auto"},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("polyline",{points:"0,0 5,5 0,10",fill:"none",stroke:"#555555","stroke-width":"1"})),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("marker",{id:`${b}_arrowEnd`,markerWidth:"10",markerHeight:"10",refX:"0",refY:"5",markerUnits:"strokeWidth",orient:"auto"},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("polyline",{points:"5,0 0,5 5,10",fill:"none",stroke:"#555555","stroke-width":"1"})),C),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("g",{transform:H},v),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("g",{transform:U},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":S.markerStart,"marker-end":S.markerEnd,x1:-x,y1:f-R,x2:-x,y2:R}),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_5__["tsx"])("line",{fill:"none",stroke:"#555555","stroke-width":"1","marker-start":j.markerStart,"marker-end":j.markerEnd,x1:$,y1:f+E,x2:f-$,y2:f+E}))))}


/***/ }),

/***/ "FCjC":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/support/clusterUtils.js ***!
  \**************************************************************************/
/*! exports provided: getClusterSizeVariable */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getClusterSizeVariable", function() { return a; });
/* harmony import */ var _renderers_visualVariables_SizeVariable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../renderers/visualVariables/SizeVariable.js */ "w/y1");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l=(e,l)=>{const a=e.featuresTilingScheme.getClosestInfoForScale(e.scale).level;return null!=l&&l.levels?l.levels[a]:null};function a(a,i){if(!a||!("visualVariables"in a)||!a.visualVariables)return null;const s=a.visualVariables.find((e=>"size"===e.type)),n=l(i,s);return n?new _renderers_visualVariables_SizeVariable_js__WEBPACK_IMPORTED_MODULE_0__["default"]({field:s.field,minSize:n[2].size,minDataValue:n[2].value,maxSize:n[3].size,maxDataValue:n[3].value}):null}


/***/ }),

/***/ "Ff4k":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/support/ActiveLayerInfo.js ***!
  \*****************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return Ae; });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "pO5D");
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Color.js */ "nvBr");
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../kernel.js */ "975N");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../request.js */ "Lqtk");
/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../symbols.js */ "H9eC");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Accessor.js */ "/CmD");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/Collection.js */ "LE9a");
/* harmony import */ var _core_Handles_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/Handles.js */ "r0DZ");
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/jsonMap.js */ "+opI");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/Logger.js */ "6S2I");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/maybe.js */ "srIe");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "9MzC");
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/screenUtils.js */ "qRWG");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/urlUtils.js */ "4EHJ");
/* harmony import */ var _core_watchUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/watchUtils.js */ "N5XI");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "WbKI");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "tQ+6");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../core/has.js */ "wSAH");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "zqDF");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "04ZG");
/* harmony import */ var _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../layers/effects/EffectView.js */ "AybS");
/* harmony import */ var _layers_effects_jsonUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../layers/effects/jsonUtils.js */ "1OZN");
/* harmony import */ var _layers_support_ExportImageParameters_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../layers/support/ExportImageParameters.js */ "cM4j");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "wdpY");
/* harmony import */ var _renderers_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../renderers/support/jsonUtils.js */ "+Xal");
/* harmony import */ var _renderers_support_rendererConversion_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../renderers/support/rendererConversion.js */ "Vv97");
/* harmony import */ var _renderers_visualVariables_support_SizeVariableLegendOptions_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../renderers/visualVariables/support/SizeVariableLegendOptions.js */ "vCke");
/* harmony import */ var _symbols_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../symbols/support/cimSymbolUtils.js */ "1EXT");
/* harmony import */ var _symbols_support_renderUtils_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../symbols/support/renderUtils.js */ "S60b");
/* harmony import */ var _symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../symbols/support/symbolUtils.js */ "vvhm");
/* harmony import */ var _symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../symbols/support/utils.js */ "rI4C");
/* harmony import */ var _clusterUtils_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./clusterUtils.js */ "FCjC");
/* harmony import */ var _colorRampUtils_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./colorRampUtils.js */ "3Qvx");
/* harmony import */ var _heatmapRampUtils_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./heatmapRampUtils.js */ "XQ5H");
/* harmony import */ var _relationshipRampUtils_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./relationshipRampUtils.js */ "y1wk");
/* harmony import */ var _sizeRampUtils_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./sizeRampUtils.js */ "G6bF");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./utils.js */ "3lco");
/* harmony import */ var _smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../smartMapping/support/utils.js */ "uK9A");
/* harmony import */ var _symbols_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../../../symbols/SimpleMarkerSymbol.js */ "Tcmu");
/* harmony import */ var _symbols_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../../../symbols/SimpleFillSymbol.js */ "DXYb");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const K=_core_Logger_js__WEBPACK_IMPORTED_MODULE_9__["default"].getLogger("esri.widgets.Legend.support.ActiveLayerInfo"),Y="https://utility.arcgis.com/sharing/tools/legend",Z="esri.layers.ImageryLayer",ee="esri.layers.ImageryTileLayer",te="esri.layers.WCSLayer",le=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,se=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_8__["JSONMap"]({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),re={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]},ne=new _symbols_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_38__["default"]({size:6,outline:{color:[128,128,128,.5],width:.5}}),ie=new _symbols_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_39__["default"]({style:"solid"});function ae(e){return"vector-field"===e.type}function oe(e){return"raster-colormap"===e.type}function ue(e){return"raster-stretch"===e.type}function ce(e){return"raster-shaded-relief"===e.type}function de(e){return"esri.renderers.SimpleRenderer"===e.declaredClass}function ye(e){return"esri.renderers.ClassBreaksRenderer"===e.declaredClass}function he(e){return"esri.renderers.UniqueValueRenderer"===e.declaredClass}function me(e){return"esri.renderers.HeatmapRenderer"===e.declaredClass}function pe(e){return ge(e)||be(e)||Se(e)||fe(e)}function fe(e){return"esri.renderers.PointCloudRGBRenderer"===e.declaredClass}function ge(e){return"esri.renderers.PointCloudClassBreaksRenderer"===e.declaredClass}function be(e){return"esri.renderers.PointCloudStretchRenderer"===e.declaredClass}function Se(e){return"esri.renderers.PointCloudUniqueValueRenderer"===e.declaredClass}function _e(e){return"esri.renderers.DotDensityRenderer"===e.declaredClass}function ve(e,t){return de(e)||ye(e)||he(e)||me(e)||_e(e)?"2d"===t.type||Object(_renderers_support_rendererConversion_js__WEBPACK_IMPORTED_MODULE_25__["isSupportedRenderer3D"])(e):ue(e)||oe(e)||ce(e)||ge(e)||be(e)||Se(e)||ae(e)}function we(e){return"esri.layers.BuildingSceneLayer"===e.declaredClass}function Le(e){return"esri.layers.VoxelLayer"===e.declaredClass}function Ee(e){return"esri.layers.WMSLayer"===e.declaredClass}function Ie(e){return"esri.layers.WMTSLayer"===e.declaredClass}function Ce(e){return"esri.layers.MapImageLayer"===e.declaredClass}function Fe(e){return"esri.layers.TileLayer"===e.declaredClass}function Re(e){return"esri.layers.FeatureLayer"===e.declaredClass}function Ve(e){return e.declaredClass===Z}function Te(e){return e.declaredClass===ee}function ze(e){return e.declaredClass===te}function xe(e){return"stretch-ramp"===e.type}function je(e){const t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return"univariate-color-size"===(null==t?void 0:t.type)}function Oe(e){const t="authoringInfo"in e&&(null==e?void 0:e.authoringInfo);return"univariate-color-size"===(null==t?void 0:t.type)&&"above-and-below"===(null==t?void 0:t.univariateTheme)}const De=new _symbols_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_38__["default"]({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}});let Me={},Pe=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_5__["default"]{constructor(e){super(e),this._handles=new _core_Handles_js__WEBPACK_IMPORTED_MODULE_7__["default"],this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_6__["default"],this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){const e=()=>this.notifyChange("ready");this._handles.add([Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_14__["on"])(this,"children","change",(t=>{const{added:l,removed:s}=t,r=this._handles;l.forEach((t=>{const l=`activeLayerInfo-ready-watcher-${t.layer.uid}`;r.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_14__["init"])(t,"ready",e),l)})),s.forEach((e=>r.remove(e.layer.uid))),e()}))]),this.keepCacheOnDestroy||(Me={})}destroy(){this._handles.destroy(),this._handles=null,this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Me=null)}get effectList(){const e=this.layer;let t=null;return"effect"in e&&e.effect&&(t=new _layers_effects_EffectView_js__WEBPACK_IMPORTED_MODULE_20__["default"],t.effect=e.effect,t.end(),t.scale=this.scale),t}get opacity(){var e;const t=this.layer.opacity,l=null==(e=this.parent)?void 0:e.opacity,s=this.layer.parent,r=s&&"uid"in s?this._getParentLayerOpacity(s):null;return null!=l?l*t:null!=r?r*t:t}get ready(){return null===this.layer||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view&&this.view.scale}get isScaleDriven(){const e=this.layer;if(null===e)return!1;if("effect"in e&&e.effect&&Array.isArray(e.effect))return!0;if("featureReduction"in e&&e.featureReduction&&"cluster"===e.featureReduction.type)return!0;if("renderer"in e&&e.renderer){if("dot-density"===e.renderer.type)return!0;const t=e.get("renderer.valueExpression");if(le.test(t))return!0;const l=e.get("renderer.visualVariables");if(l)return l.some((e=>this._isScaleDrivenSizeVariable(e)))}return this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}async buildLegendElementsForFeatureCollections(e){if(!(!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView()))return this.legendElements=[],void this.notifyChange("ready");const t=Array.from(e,(e=>{if(Re(e))return this._getRendererLegendElements(e.renderer,{title:e.title});if(e.featureSet&&e.featureSet.features.length){const t=e.layerDefinition,l=t&&t.drawingInfo,s=l&&Object(_renderers_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_24__["fromJSON"])(l.renderer),r=se.read(t.geometryType);return s?this._getRendererLegendElements(s,{title:e.name,geometryType:r}):(K.warn("drawingInfo not available!"),null)}return null}));try{const e=[];await Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["eachAlways"])(t).then((t=>{t.forEach((({value:t})=>t&&e.push(...t)))})),this.legendElements=e,this.notifyChange("ready")}catch(l){K.warn("error while building legend for layer!",l)}}async buildLegendElementsForRenderer(e){try{const t=!this.hideLayersNotInCurrentView||await this._isLayerInCurrentView();this.legendElements=t?await this._getRendererLegendElements(e):[],this.notifyChange("ready")}catch(t){K.warn("error while building legend for layer!",t)}}async buildLegendElementsForTools(){const e=this.layer;if(Le(e))this._constructLegendElementsForVoxellayer();else if(Ie(e))this._constructLegendElementsForWMTSlayer();else if(Ee(e))await this._constructLegendElementsForWMSSublayers();else if(we(e))await this._constructLegendElementsForBuildingSceneLayer();else if(Ce(e)||Fe(e)||we(e))await this._constructLegendElementsForSublayers();else{this._handles.remove("imageryLayers-watcher");let s="default";if(Ve(e)){var t,l;const r=e;s=((null==r||null==(t=r.renderingRule)?void 0:t.functionName)||"default")+"_"+(null!=(l=e.bandIds)&&l.length?e.bandIds.join(""):"###")}await this._getLegendLayers(`${e.uid}-${s}`).then((async t=>{this.legendElements=[],this.notifyChange("ready");const l=t.map((async t=>{if(Ve(e)||Te(e)){const t=e.watch(["renderingRule","bandIds"],(()=>Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["debounce"])((async()=>{Me.default=null,e.renderer?await this.buildLegendElementsForRenderer(e.renderer):await this.buildLegendElementsForTools()}))()));this._handles.add(t,"imageryLayers-watcher")}const l=this._generateSymbolTableElementForLegendLayer(t);l&&l.infos.length&&(Ve(e)&&(l.title=e.title),this.legendElements.push(l)),this.notifyChange("ready")}));await Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["eachAlways"])(l)})).catch((e=>{K.warn("Request to server for legend has failed!",e)}))}}async _isLayerInCurrentView(){const e=this.layer,t=this.layerView,l=t&&"createQuery"in t&&"queryFeatureCount"in t;if(!l&&!(t&&"createQuery"in e&&"queryFeatureCount"in e))return!0;await Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_14__["whenFalseOnce"])(t,"updating");const s=l?"createQuery"in t&&t.createQuery():"createQuery"in e&&e.createQuery();s.geometry=this.view.extent;return 0!==(l?"queryFeatureCount"in t&&await t.queryFeatureCount(s):"queryFeatureCount"in e&&await e.queryFeatureCount(s))}_getParentLayerOpacity(e){let t=1;const l=e.parent;return l&&"uid"in l&&(t=this._getParentLayerOpacity(l)),e.opacity*t}_isGroupActive(){const e=this.children;return!!e.length&&e.some((e=>e.ready))}_isScaleDrivenSizeVariable(e){if(e&&"size"!==e.type)return!1;const t=e,l=t.minSize,s=t.maxSize;return"object"==typeof l&&l?this._isScaleDrivenSizeVariable(l):"object"==typeof s&&s?this._isScaleDrivenSizeVariable(s):!!t.expression||le.test(t.valueExpression)}_isLayerScaleDriven(e){if("minScale"in e&&e.minScale>0||"maxScale"in e&&e.maxScale>0)return!0;if("sublayers"in e&&e.sublayers)return e.sublayers.some((e=>this._isLayerScaleDriven(e)));const t=e.parent;if(!1===e.loaded&&t&&Ce(t)&&"source"in e&&e.source&&"map-layer"===e.source.type)for(const l of t.sourceJSON.layers)if(l.id===e.source.mapLayerId&&(l.minScale>0||l.maxScale>0))return!0;return!1}async _constructLegendElementsForVoxellayer(){this.legendElements=[],this._handles.remove("voxel-style-watcher");const e=this.layer;this._handles.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_14__["watch"])(e,"style",(()=>this._constructLegendElementsForVoxellayer())),"voxel-style-watcher");const t=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__["unwrap"])(e.getVariableStyle(null)),l=[];var s;if(t)if(null!=(s=t.uniqueValues)&&s.length){const e=[];t.uniqueValues.forEach((t=>{t.enabled&&e.push({label:t.label||`${t.value}`,value:t.value,symbol:new _symbols_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_39__["default"]({color:t.color,outline:null})})})),e.length&&l.push({type:"symbol-table",title:t.label,infos:e})}else if(t.transferFunction){const{colorStops:e,stretchRange:s}=t.transferFunction,r=e.toArray().reverse(),n=s.map(((e,t)=>`${0===t?_utils_js__WEBPACK_IMPORTED_MODULE_36__["SPECIAL_CHARS_LESS_THAN"]:_utils_js__WEBPACK_IMPORTED_MODULE_36__["SPECIAL_CHARS_GREATER_THAN"]} ${Object(_smartMapping_support_utils_js__WEBPACK_IMPORTED_MODULE_37__["formatNumberLabel"])(e)}`)).reverse(),i=r.map((e=>({color:e.color,value:null,label:null})));i[0].label=n[0],i[i.length-1].label=n[1],l.push({type:"color-ramp",title:t.label,infos:i,preview:Object(_symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_29__["renderColorRampPreviewHTML"])(r.map((e=>e.color)))})}const r=e.opacity,n=l.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]).filter((e=>!(null==e||!e.symbol))).map((e=>this._getSymbolPreview(e,r)));await Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["eachAlways"])(n),this.legendElements=l,this.notifyChange("ready")}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this._handles.remove("wmts-activeLayer-watcher");const e=this.layer.activeLayer;if(this._handles.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_14__["watch"])(this.layer,"activeLayer",(()=>this._constructLegendElementsForWMTSlayer())),"wmts-activeLayer-watcher"),e.styleId&&e.styles){let t=null;e.styles.some((l=>e.styleId===l.id&&(t=l.legendUrl,!0))),t&&(this.legendElements=[{type:"symbol-table",title:e.title,infos:[{src:t,opacity:this.opacity}]}])}this.notifyChange("ready")}async _constructLegendElementsForWMSSublayers(){this.legendElements=[],this._handles.remove("wms-sublayers-watcher");const e=this.layer;let t=null;(e.customParameters||e.customLayerParameters)&&(t={...e.customParameters,...e.customLayerParameters}),this._handles.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_14__["watch"])(this.layer,"sublayers",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher"),this.legendElements=await this._generateLegendElementsForWMSSublayers(e.sublayers,t),this.notifyChange("ready")}async _generateLegendElementsForWMSSublayers(e,t){const l=[];this._handles.add(e.on("change",(()=>this._constructLegendElementsForWMSSublayers())),"wms-sublayers-watcher");const s=e.toArray();for(const r of s){const e=r.watch(["title","visible","legendEnabled"],(()=>this._constructLegendElementsForWMSSublayers()));if(this._handles.add(e,"wms-sublayers-watcher"),!this.respectLayerVisibility||r.visible&&r.legendEnabled){const e=await this._generateSymbolTableElementForWMSSublayer(r,t);e&&e.infos.length&&l.unshift(e)}}return l}async _generateSymbolTableElementForWMSSublayer(e,t){if(!e.legendUrl&&e.sublayers){const l=(await this._generateLegendElementsForWMSSublayers(e.sublayers,t)).filter((e=>e));return{type:"symbol-table",title:e.title,infos:l}}return this._generateSymbolTableElementForLegendUrl(e,t)}async _generateSymbolTableElementForLegendUrl(e,t){var l;let r=e.legendUrl;if(!r)return;const n={type:"symbol-table",title:e.title||e.name||e.id&&e.id+"",infos:[]};t&&(r=Object(_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_13__["addQueryParameters"])(r,t));let i=null;const a=null==(l=e.layer)?void 0:l.opacity;try{i=(await Object(_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(r,{responseType:"image"})).data,i&&(i.style.opacity=a)}catch{}return n.infos.push({src:r,preview:i,opacity:a}),n}_getLegendLayers(e,t){const l=Me&&Me[e];return l?Promise.resolve(l):this._legendRequest(t).then((t=>{const l=t.layers;return Me[e]=l,l}))}_legendRequest(e){const t=this.layer;let l={f:"json",dynamicLayers:e};if(Ve(t)){const e=t.exportImageServiceParameters.renderingRule;if(e&&(l.renderingRule=JSON.stringify(e.toJSON())),t.bandIds&&(l.bandIds=t.bandIds.join()),t.raster||t.viewId||t.customParameters){const{raster:e,viewId:s,customParameters:r}=t;l={raster:e,viewId:s,...l,...r}}}let r=t.url.replace(/(\/)+$/,"");if("version"in t&&t.version>=10.01){const e=r.indexOf("?");e>-1?r=r.substring(0,e)+"/legend"+r.substring(e):r+="/legend"}else{const e=r.toLowerCase().indexOf("/rest/"),t=r.substring(0,e)+r.substring(e+5,r.length);r=Y+"?soapUrl="+encodeURI(t)+"&returnbytes=true"}return Object(_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(r,{query:l}).then((e=>e.data))}async _constructLegendElementsForBuildingSceneLayer(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_14__["watch"])(e,"sublayers",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForBuildingSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){K.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForBuildingSublayers(e,t){let l=[];this._handles.add(e.on("change",(()=>this._constructLegendElementsForBuildingSceneLayer())),"sublayers-watcher");const s=e.toArray();for(const r of s){const e=r.watch(["renderer","opacity","title","visible"],(()=>this._constructLegendElementsForBuildingSceneLayer()));if(this._handles.add(e,"sublayers-watcher"),!this.respectLayerVisibility||r.visible){const e=r&&null!=r.opacity?r.opacity:null,s=null!=e?e*t:t;if("building-group"===r.type){const e={type:"symbol-table",title:r.title,infos:[]},t=await this._generateLegendElementsForBuildingSublayers(r.sublayers,s);e.infos.push(...t),l=[e,...l]}else if(r.renderer){l=[...await this._getRendererLegendElements(r.renderer,{title:r.title,opacity:s,sublayer:r}),...l]}}}return l.filter((e=>!!e&&(!("infos"in e)||e.infos.length>0)))}async _constructLegendElementsForSublayers(){this.legendElements=[],this._handles.remove("sublayers-watcher");const e=this.layer;this._handles.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_14__["watch"])(e,"sublayers",(()=>this._constructLegendElementsForSublayers)),"sublayers-watcher");try{this.legendElements=await this._generateLegendElementsForSublayers(e.sublayers,this.opacity),this.notifyChange("ready")}catch(t){K.warn("Request to server for legend has failed!",t)}}async _generateLegendElementsForSublayers(e,t,l){const s=this.layer;let r=[];this._handles.add(e.on("change",(()=>this._constructLegendElementsForSublayers())),"sublayers-watcher");let n=e.toArray();!l&&this.sublayerIds&&this.sublayerIds.length&&(n=this.sublayerIds.map((e=>s.findSublayerById(e))).filter(Boolean));for(const i of n){const e=i.watch("renderer, opacity, title, visible, legendEnabled",(()=>this._constructLegendElementsForSublayers()));if(this._handles.add(e,"sublayers-watcher"),!this.respectLayerVisibility||i.visible&&i.legendEnabled&&this._isSublayerInScale(i)){const e=i&&null!=i.opacity?i.opacity:null,s=null!=e?e*t:t;if(i.renderer&&!i.sublayers&&i.originIdOf("renderer")>2){await i.load();r=[...await this._getRendererLegendElements(i.renderer,{title:i.title,opacity:s,sublayer:i}),...r]}else{const e=await this._generateSymbolTableElementForSublayer(i,s,l);e&&r.unshift(e)}}}return r.filter((e=>!!e&&(!("infos"in e)||e.infos.length>0)))}async _generateSymbolTableElementForSublayer(e,t,l){if(!l){l=new Map;const t=this.layer,s=e.source;let r=null;if(!(!s||"map-layer"===s.type&&s.mapLayerId===e.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in t&&t.gdbVersion)))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("labelsVisible")>2){const e=new _layers_support_ExportImageParameters_js__WEBPACK_IMPORTED_MODULE_22__["ExportImageParameters"]({layer:this.layer});r=e.hasDynamicLayers?e.dynamicLayers:null,e.destroy()}const n=r||`${t.uid}-default`;(await this._getLegendLayers(n,r)).forEach((e=>l.set(e.layerId,e)))}const s=l.get(e.id);if(!s&&e.sublayers){const s=await this._generateLegendElementsForSublayers(e.sublayers,t,l);return{type:"symbol-table",title:e.title,infos:s}}return this._generateSymbolTableElementForLegendLayer(s,e,t)}_generateSymbolTableElementForLegendLayer(e,t,l){var s;if(!e||!e.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(e,t))return null;const r=null==t?void 0:t.renderer;let n=(null==t?void 0:t.title)||e.layerName;if(r&&(!t||(null==t?void 0:t.originIdOf("renderer"))>2)){const e=(null==t?void 0:t.title)||this._getRendererTitle(r,t);e&&(n&&"string"!=typeof e&&"title"in e&&(e.title=n),n=e)}const i={type:"symbol-table",title:n,legendType:e.legendType?e.legendType:null,infos:[]},a=t?this._sanitizeLegendForSublayer(e.legend.slice(),t):e.legend;return(null==(s=e.legendGroups)?void 0:s.length)>0?e.legendGroups.forEach((t=>{var s;const r={type:"symbol-table",title:t.heading,legendType:e.legendType?e.legendType:null,infos:this._generateSymbolTableElementInfosForLegendLayer(a.filter((e=>e.groupId===t.id)),e.layerId,l)};(null==(s=r.infos)?void 0:s.length)>0&&i.infos.push(r)})):i.infos=this._generateSymbolTableElementInfosForLegendLayer(a,e.layerId,l),i.infos.length>0?i:null}_generateSymbolTableElementInfosForLegendLayer(e,t,s){return e.map((e=>{let r=e.url;if(e.imageData&&e.imageData.length>0)r=`data:image/png;base64,${e.imageData}`;else{if(0===r.indexOf("http"))return null;r=Object(_kernel_js__WEBPACK_IMPORTED_MODULE_2__["addTokenParameter"])(`${this.layer.url}/${t}/images/${r}`)}return{label:e.label,src:r,opacity:null==s?this.opacity:s,width:e.width,height:e.height}})).filter((e=>!!e))}_isSublayerInScale(e){const t=e.minScale||0,l=e.maxScale||0;return!(t>0&&t<this.scale||l>this.scale)}_isLegendLayerInScale(e,t){const l=t||this.layer;let s=null,r=null,n=!0;return!l.minScale&&0!==l.minScale||!l.maxScale&&0!==l.maxScale?(0===e.minScale&&l.tileInfo&&(s=l.tileInfo.lods[0].scale),0===e.maxScale&&l.tileInfo&&(r=l.tileInfo.lods[l.tileInfo.lods.length-1].scale)):(s=Math.min(l.minScale,e.minScale)||l.minScale||e.minScale,r=Math.max(l.maxScale,e.maxScale)),(s>0&&s<this.scale||r>this.scale)&&(n=!1),n}_sanitizeLegendForSublayer(e,t){if("version"in this.layer&&this.layer.version<10.1||0===e.length)return e;const l=t.renderer,s=e.some((e=>e.values));let r=null,n=null;return s&&e.some(((e,t)=>(e.values||(r=t,n=e,n.label||(n.label="others")),null!=n))),l?"unique-value"===l.type?n&&(e.splice(r,1),e.push(n)):"class-breaks"===l.type&&(n&&e.splice(r,1),e.reverse(),n&&e.push(n)):n&&(e.splice(r,1),e.push(n)),e}async _getRendererLegendElements(e,t={}){return ve(e,this.view)?pe(e)?this._constructPointCloudRendererLegendElements(e,t):_e(e)?this._constructDotDensityRendererLegendElements(e):this._constructRendererLegendElements(e,t):(K.warn(`Renderer of type '${e.type}' not supported!`),[])}_getPointCloudRendererTitle(e){return e.legendOptions&&e.legendOptions.title||e.field}_constructPointCloudRendererLegendElements(e,t={}){const l=t.title,s=[];let r=null,n=null;if(ge(e))r={type:"symbol-table",title:l||this._getPointCloudRendererTitle(e),infos:[]},e.colorClassBreakInfos.forEach((e=>{r.infos.unshift({label:e.label||e.minValue+" - "+e.maxValue,value:[e.minValue,e.maxValue],symbol:this._getAppliedCloneSymbol(ne,e.color)})}));else if(be(e)){const t=e.stops;let s=null;if(t.length&&(1===t.length&&(s=t[0].color),!s)){const e=t[0].value,l=t[t.length-1].value;if(null!=e&&null!=l){s=Object(_colorRampUtils_js__WEBPACK_IMPORTED_MODULE_32__["getColorFromPointCloudStops"])(e+(l-e)/2,t)}}r={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(ne,s||ne.color)}]};const i=Object(_colorRampUtils_js__WEBPACK_IMPORTED_MODULE_32__["getRampStopsForPointCloud"])(e.stops);n={type:"color-ramp",title:l||this._getPointCloudRendererTitle(e),infos:i,preview:Object(_symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_29__["renderColorRampPreviewHTML"])(i.map((e=>e.color)))}}else Se(e)&&(r={type:"symbol-table",title:l||this._getPointCloudRendererTitle(e),infos:[]},e.colorUniqueValueInfos.forEach((e=>{r.infos.push({label:e.label||e.values.join(", "),value:e.values.join(", "),symbol:this._getAppliedCloneSymbol(ne,e.color)})})));r&&r.infos.length&&s.push(r),n&&n.infos.length&&s.push(n);const i=s.reduce(((e,t)=>e.concat(t.infos)),[]).filter((e=>!!e.symbol)).map((t=>this._getSymbolPreview(t,this.opacity,{symbolConfig:{applyColorModulation:!!e.colorModulation}})));return Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["eachAlways"])(i).then((()=>s))}_getElementInfoForDotDensity(e,t){const{backgroundColor:l,outline:s,dotSize:r}=e,n=this.effectList,i=null==n?void 0:n.effects.map((e=>e.toJSON())),a=Object(_layers_effects_jsonUtils_js__WEBPACK_IMPORTED_MODULE_21__["effectFunctionsFromJSON"])(i),o=r+"-"+t+"-"+l+"-"+(s&&JSON.stringify(s.toJSON()))+"-"+a,u=this._dotDensityUrlCache,c=u.has(o)?u.get(o):Object(_symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_29__["renderDotDensityPreviewHTML"])(e,t);u.set(o,c);const d={shape:{type:"image",x:0,y:0,width:c.width,height:c.height,src:c.src},fill:null,stroke:null,offset:[0,0]},y=Object(_symbols_support_renderUtils_js__WEBPACK_IMPORTED_MODULE_28__["renderSymbol"])([[d]],[c.width,c.height],{effectView:this.effectList});return{opacity:1,src:c.src,preview:y,width:c.width,height:c.height}}_constructDotDensityRendererLegendElements(e){const t=e.calculateDotValue(this.view.scale),l=e.legendOptions&&e.legendOptions.unit,s={type:"symbol-table",title:{value:t&&Math.round(t),unit:l||""},infos:[]};return e.attributes.forEach((t=>{const l=this._getElementInfoForDotDensity(e,t.color);l.label=t.label||t.valueExpressionTitle||t.field,s.infos.push(l)})),Promise.resolve([s])}async _constructRendererLegendElements(e,t={}){const{title:l,sublayer:s}=t,r=s||this.layer;let n=await this._loadRenderer(e);this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;const i=await this._getVisualVariableLegendElements(n,r)||[],a={type:"symbol-table",title:l||this._getRendererTitle(n,r),infos:[]};let o=null,c=!1;const y=new Set;if(je(n)){let e=l;const t=Oe(n)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",s=i.findIndex((e=>"color-ramp"===e.type)),r=-1!==s?i.splice(s,1)[0]:null,a=i.findIndex((e=>"size-ramp"===e.type)),o=-1!==a?i.splice(a,1)[0]:null,u=[];r&&(e=r.title,u.push(r)),o&&(e=o.title,u.push(o)),u.length>0&&i.push({type:t,title:e,infos:u})}else if(me(n)){const e=Object(_heatmapRampUtils_js__WEBPACK_IMPORTED_MODULE_33__["getHeatmapRampStops"])(n);i.push({type:"heatmap-ramp",title:l,infos:e,preview:Object(_symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_29__["renderColorRampPreviewHTML"])(e.map((e=>e.color)),{effectList:this.effectList})})}else if(he(n)){const e=n&&n.authoringInfo;if(e&&"relationship"===e.type){const{focus:t,numClasses:l,field1:s,field2:o}=e;if(l&&s&&o){const e=[s,o];let u=Object(_relationshipRampUtils_js__WEBPACK_IMPORTED_MODULE_34__["getRotationAngleForFocus"])(t)||0;for(const t of e){const{field:e,normalizationField:l,label:s}=t,n=s||{field:this._getFieldAlias(e,r),normField:l&&this._getFieldAlias(l,r)},i=De.clone();i.angle=u,a.infos.push({label:n,symbol:i}),y.add(i),u+=90}const c=Object(_relationshipRampUtils_js__WEBPACK_IMPORTED_MODULE_34__["getRelationshipRampElement"])({focus:t,numClasses:l,infos:n.uniqueValueInfos});i.unshift(c)}}else{const e=n.field;n.uniqueValueInfos.forEach((t=>{t.symbol&&a.infos.push({label:t.label||this._getDomainName(e,t.value,r)||t.value,value:t.value,symbol:t.symbol})}))}n.defaultSymbol&&(a.infos.push({label:n.defaultLabel||"others",symbol:n.defaultSymbol}),c=!0)}else if(ye(n)){o=this._isUnclassedRenderer(n);(!o||!this._hasSizeRamp)&&(n.classBreakInfos.forEach((e=>{e.symbol&&a.infos.unshift({label:e.label||(o?null:e.minValue+" - "+e.maxValue),value:[e.minValue,e.maxValue],symbol:e.symbol})})),o&&(a.title=null),this._updateInfosforClassedSizeRenderer(n,a.infos)),n.defaultSymbol&&!o&&(a.infos.push({label:n.defaultLabel||"others",symbol:n.defaultSymbol}),c=!0)}else if(ue(n))if(Te(this.layer)||ze(this.layer)){const e=this._constructTileImageryStretchRendererElements(n);xe(e)?i.push(e):a.infos=e}else{const e=this.layer;let t,l;n.statistics&&n.statistics.length&&(t=null!=n.statistics[0].min?n.statistics[0].min:n.statistics[0][0],l=null!=n.statistics[0].max?n.statistics[0].max:n.statistics[0][1]);let s=[];const r=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__["unwrap"])(e.renderingRule?await e.generateRasterInfo(e.renderingRule):e.serviceRasterInfo),o=r.keyProperties.BandProperties,c=re[e.rasterInfo.pixelType.toLowerCase()];1===r.bandCount||e.bandIds&&1===e.bandIds.length?(t=null!=t?t:r.statistics?r.statistics[e.bandIds[0]].min:c[0],l=null!=l?l:r.statistics?r.statistics[e.bandIds[0]].max:c[1],t||l?i.push(this._getStretchLegendElements(n,{min:t,max:l})):this._getServerSideLegend()):r.bandCount>=3?o&&o.length>=r.bandCount?e.bandIds&&3===e.bandIds.length?(s=e.bandIds.map((e=>o[e].BandName)),a.infos=this._createSymbolTableElementMultiBand(s)):"lerc"===e.format?(s=[0,1,2].map((e=>o[e].BandName)),a.infos=this._createSymbolTableElementMultiBand(s)):this._getServerSideLegend():"lerc"===e.format?(s=["band1","band2","band3"],a.infos=this._createSymbolTableElementMultiBand(s)):this._getServerSideLegend():this._getServerSideLegend()}else if(oe(n))n.colormapInfos.forEach((e=>{a.infos.push({label:e.label,value:e.value,symbol:this._getAppliedCloneSymbol(ie,e.color)})}));else if(de(n)){let e=n.symbol;switch(t.geometryType){case"point":e="pointSymbol"in r&&r.pointSymbol;break;case"polyline":e="lineSymbol"in r&&r.lineSymbol;break;case"polygon":e="polygonSymbol"in r&&r.polygonSymbol}n.symbol&&!this._hasSizeRamp&&a.infos.push({label:n.label,symbol:e})}else if(ae(n)){n.outputUnit&&(this.title="("+n.toJSON().outputUnit+")"),a.title=n.attributeField;const e=n.getClassBreakInfos();null!=e&&e.length?e.forEach((e=>{a.infos.push({label:e.minValue+" - "+e.maxValue,symbol:e.symbol})})):a.infos.push({label:n.attributeField,symbol:n.getDefaultSymbol()})}else ce(n)&&i.push(this._getStretchLegendElements(n,{min:0,max:255}));const h=n.defaultSymbol;!h||c||de(n)||o&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||i.push({type:"symbol-table",infos:[{label:n.defaultLabel||"others",symbol:h}]}),a.infos.length&&i.unshift(a);const m=null==t.opacity?this.opacity:t.opacity,p=this._isTallSymbol("visualVariables"in n&&n.visualVariables),f=Ve(this.layer)||Te(this.layer),g=i.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]).filter((e=>!(null==e||!e.symbol))).map((e=>this._getSymbolPreview(e,m,{isDefault:e.symbol===h,applyScaleDrivenSize:!y.has(e.symbol),symbolConfig:{isTall:p,isSquareFill:f},effectList:y.has(e.symbol)?null:this.effectList})));return n=null,await Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["eachAlways"])(g),i}_getServerSideLegend(){setTimeout((()=>this.buildLegendElementsForTools()),0)}_getAllInfos(e){const t=null==e?void 0:e.infos;return t?t.reduce(((e,t)=>e.concat(this._getAllInfos(t))),[]):[e]}_constructTileImageryStretchRendererElements(e){var t,l;const s=this.layer,r=s.rasterInfo,n=r.bandCount||e.statistics.length;let i,a,o=[];const u=r.keyProperties&&r.keyProperties.BandProperties,c=null!=e&&null!=(t=e.statistics)&&t.length?e.statistics:null==r?void 0:r.statistics;if(c)i=void 0!==c[0].min?c[0].min:c[0][0],a=c[0].max||c[0][1];else{const e=re[s.rasterInfo.pixelType.toLowerCase()];i=e[0],a=e[1]}if(s.hasStandardTime()&&(i=s.getStandardTimeValue(i),a=s.getStandardTimeValue(a)),1===r.bandCount||1===(null==(l=s.bandIds)?void 0:l.length))return this._getStretchLegendElements(e,{min:i,max:a});function d(e){var t;const l=(null!=s&&null!=(t=s.bandIds)&&t.length?s.bandIds:Array.from(Array(Math.min(r.bandCount,3)).keys())).map((t=>e&&e[t]&&e[t].BandName||"band"+(t+1)));return l.length<3?l.push(l[1]):l.length>3&&l.splice(3),l}return o=u&&u.length>=n?d(u):d(),this._createSymbolTableElementMultiBand(o)}_getStretchLegendElements(e,t){const l=e.colorRamp,s=Object(_colorRampUtils_js__WEBPACK_IMPORTED_MODULE_32__["getStrectchRampStops"])(l,t);return{type:"stretch-ramp",title:"",infos:s,preview:Object(_symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_29__["renderColorRampPreviewHTML"])(s.map((e=>e.color)))}}_createSymbolTableElementMultiBand(e){const t=[],l=["red","green","blue"];return e.forEach(((e,s)=>{t.push({label:{colorName:l[s],bandName:e},src:_utils_js__WEBPACK_IMPORTED_MODULE_36__["RGB_IMG_SOURCE"][s],opacity:1})})),t}_updateInfosforClassedSizeRenderer(e,t){const l=e.authoringInfo&&"class-breaks-size"===e.authoringInfo.type,s=e.classBreakInfos.some((e=>Object(_symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_30__["isVolumetricSymbol"])(e.symbol)));if(l&&s){const l=_sizeRampUtils_js__WEBPACK_IMPORTED_MODULE_35__["REAL_WORLD_MAX_SIZE"],s=_sizeRampUtils_js__WEBPACK_IMPORTED_MODULE_35__["REAL_WORLD_MIN_SIZE"],r=e.classBreakInfos.length,n=(l-s)/(r>1?r-1:r);t.forEach(((e,t)=>{e.size=l-n*t}))}}_isTallSymbol(e){let t=!1,l=!1;if(e)for(let s=0;s<e.length&&(!t||!l);s++){const r=e[s];"size"===r.type&&("height"===r.axis&&(t=!0),"width-and-depth"===r.axis&&(l=!0))}return t&&l}async _getSymbolPreview(e,t,l){let s=null!=l&&l.isDefault||null!=e.size||!this._hasSizeRamp?e.size:Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_12__["px2pt"])(22);if(this._scaleDrivenSizeVariable&&null!=l&&l.applyScaleDrivenSize){const{getSize:t}=await Promise.resolve(/*! import() */).then(__webpack_require__.bind(null, /*! ../../../renderers/visualVariables/support/visualVariableUtils.js */ "0pea"));s=t(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:"simple-marker"===e.symbol.type?e.symbol.style:null})}return Object(_symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_29__["renderPreviewHTML"])(e.symbol,{size:s,opacity:t,scale:!1,symbolConfig:null==l?void 0:l.symbolConfig,effectView:null==l?void 0:l.effectList}).then((t=>(e.preview=t,e))).catch((()=>(e.preview=null,e)))}async _loadRenderer(e){var t,l;const s=[],r=this.layer;e=e.clone(),this._hasClusterSizeVariable=!1;const n="visualVariables"in e&&(null==(t=e.visualVariables)?void 0:t.some((e=>"size"===e.type&&"outline"!==e.target&&!le.test(e.valueExpression))));if(e&&"visualVariables"in e&&!n&&"featureReduction"in r&&"cluster"===(null==(l=r.featureReduction)?void 0:l.type)){const t=this.layerView._effectiveRenderer,l=Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__["unwrap"])(Object(_clusterUtils_js__WEBPACK_IMPORTED_MODULE_31__["getClusterSizeVariable"])(t,this.view));if(l){const t=r.featureReduction;if("clusterMinSize"in t&&"clusterMaxSize"in t){const{clusterMinSize:e,clusterMaxSize:s}=t;l.legendOptions=new _renderers_visualVariables_support_SizeVariableLegendOptions_js__WEBPACK_IMPORTED_MODULE_26__["default"]({showLegend:e!==s})}const s=e.visualVariables||[];e.visualVariables=s.concat([l]),this._hasClusterSizeVariable=!0}}const i=await this._getMedianColor(e);if(ye(e)||he(e)){const t=(e.classBreakInfos||e.uniqueValueInfos).map((e=>this._fetchSymbol(e.symbol,i).then((t=>{e.symbol=t})).catch((()=>{e.symbol=null}))));Array.prototype.push.apply(s,t)}return s.push(this._fetchSymbol(e.symbol||e.defaultSymbol,e.defaultSymbol?null:i).then((t=>{this._applySymbolToRenderer(e,t,de(e))})).catch((()=>{this._applySymbolToRenderer(e,null,de(e))}))),Object(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_11__["eachAlways"])(s).then((()=>e))}_applySymbolToRenderer(e,t,l){l?e.symbol=t:e.defaultSymbol=t}async _getMedianColor(e){if(!("visualVariables"in e)||!e.visualVariables)return null;const t=e.visualVariables.find((e=>"color"===e.type));if(!t)return null;let l=null,s=null;if(t.stops){if(1===t.stops.length)return t.stops[0].color;l=t.stops[0].value,s=t.stops[t.stops.length-1].value}const r=l+(s-l)/2,{getColor:n}=await Promise.resolve(/*! import() */).then(__webpack_require__.bind(null, /*! ../../../renderers/visualVariables/support/visualVariableUtils.js */ "0pea"));return n(t,r)}_fetchSymbol(e,t){if(!e)return Promise.reject();if("web-style"===e.type){const l=e.portal,s=l&&l.url,r=l&&l.user&&l.user.username,n=e.name+"-"+e.styleName+"-"+e.styleUrl+"-"+s+"-"+r,i=this._webStyleSymbolCache;return i.has(n)||("2d"===this.view.type?i.set(n,e.fetchCIMSymbol()):i.set(n,e.fetchSymbol())),i.get(n).then((e=>this._getAppliedCloneSymbol(e,t))).catch((()=>(K.warn("Fetching web-style failed!"),Promise.reject())))}return Promise.resolve(this._getAppliedCloneSymbol(e,t))}_getAppliedCloneSymbol(e,l){if(!e||!l)return e;const s=e.clone(),r=l&&l.toRgba();return s.type.indexOf("3d")>-1?this._applyColorTo3dSymbol(s,r):"cim"===s.type?Object(_symbols_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_27__["applyCIMSymbolColor"])(s,l):s.color&&(s.color=new _Color_js__WEBPACK_IMPORTED_MODULE_1__["default"](r||s.color)),s}_applyColorTo3dSymbol(e,l){l&&e.symbolLayers.forEach((e=>{e&&(e.material||(e.material={}),e.material.color=new _Color_js__WEBPACK_IMPORTED_MODULE_1__["default"](l))}))}async _getVisualVariableLegendElements(e,t){if(!("visualVariables"in e)||!e.visualVariables||"vector-field"===e.type)return null;const l=e.visualVariables,s=[],r=[],n=[];for(const c of l)"color"===c.type?s.push(c):"size"===c.type?r.push(c):"opacity"===c.type&&n.push(c);const i=[...s,...r,...n];let a,o;if(0===s.length&&ye(e)&&e.classBreakInfos&&1===e.classBreakInfos.length){const t=e.classBreakInfos[0];a=t&&t.symbol}if(0===s.length&&de(e)&&(a=e.symbol),a)if(a.type.indexOf("3d")>-1){const e=a.symbolLayers.getItemAt(0);"water"===e.type?Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__["isSome"])(e.color)&&(o=e.color):Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__["isSome"])(e.material)&&Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_10__["isSome"])(e.material.color)&&(o=e.material.color)}else a.url||(o=a.color);const u=this.effectList;return(await Promise.all(i.map((async l=>{if(!l.legendOptions||!1!==l.legendOptions.showLegend){const s=this._getRampTitle(l,t);let r=null;const n="getField"in t&&t.getField&&t.getField(l.field),i=n&&Object(_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_23__["isDateField"])(n);if("color"===l.type){const e=await Object(_colorRampUtils_js__WEBPACK_IMPORTED_MODULE_32__["getRampStops"])(l,null,i);r={type:"color-ramp",title:s,infos:e,preview:Object(_symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_29__["renderColorRampPreviewHTML"])(e.map((e=>e.color)),{effectList:u})},this._hasColorRamp||(this._hasColorRamp=!(null==r.infos||!r.infos.length))}else if("size"===l.type&&"outline"!==l.target)le.test(l.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=l):(r={type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(l):s,infos:await Object(_sizeRampUtils_js__WEBPACK_IMPORTED_MODULE_35__["getRampStops"])(e,l,await this._getMedianColor(e),this.scale,this.view.type,i)},this._hasSizeRamp||(this._hasSizeRamp=!(null==r.infos||!r.infos.length)));else if("opacity"===l.type){const e=await Object(_colorRampUtils_js__WEBPACK_IMPORTED_MODULE_32__["getRampStops"])(l,o,i);r={type:"opacity-ramp",title:s,infos:e,preview:Object(_symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_29__["renderColorRampPreviewHTML"])(e.map((e=>e.color)),{effectList:u})},this._hasOpacityRamp||(this._hasOpacityRamp=!(null==r.infos||!r.infos.length))}return r&&r.infos?r:null}})))).filter((e=>!!e))}_getDomainName(e,t,l){if(e&&"function"!=typeof e){const s="getField"in l&&l.getField&&l.getField(e),r=s&&"getFieldDomain"in l&&l.getFieldDomain?l.getFieldDomain(s.name):null;return r&&"coded-value"===r.type?r.getName(t):null}return null}_getClusterTitle(e){const t=this.layer,l=e.field;if("featureReduction"in t&&t.featureReduction&&"cluster"===t.featureReduction.type){const e=t.featureReduction,s="popupTemplate"in e&&e.popupTemplate,r=s&&s.fieldInfos;if(r)for(const t of r)if(t.fieldName===l)return"cluster_count"===l?t.label||{showCount:!0}:t.label}return{showCount:!0}}_getRampTitle(e,t){let l=e.field,s=e.normalizationField,r=!1,n=!1,i=!1,a=null;l="function"==typeof l?null:l,s="function"==typeof s?null:s;const o=e.legendOptions&&e.legendOptions.title;if(null!=o)a=o;else if(e.valueExpressionTitle)a=e.valueExpressionTitle;else{if("renderer"in t&&t.renderer&&"authoringInfo"in t.renderer&&t.renderer.authoringInfo&&t.renderer.authoringInfo.visualVariables){const e=t.renderer.authoringInfo.visualVariables;for(let t=0;t<e.length;t++){const l=e[t];if("color"===l.type){if("ratio"===l.style){r=!0;break}if("percent"===l.style){n=!0;break}if("percent-of-total"===l.style){i=!0;break}}}}a={field:l&&this._getFieldAlias(l,t),normField:s&&this._getFieldAlias(s,t),ratio:r,ratioPercent:n,ratioPercentTotal:i}}return a}_getRendererTitle(e,t){const l=e;if(l.legendOptions&&l.legendOptions.title)return l.legendOptions.title;if(l.valueExpressionTitle)return l.valueExpressionTitle;let s=l.field,r=null,n=null;ye(l)&&(r=l.normalizationField,n="percent-of-total"===l.normalizationType),s="function"==typeof s?null:s,r="function"==typeof r?null:r;let i=null;return(s||r)&&(i={field:s&&this._getFieldAlias(s,t),normField:r&&this._getFieldAlias(r,t),normByPct:n}),i}_getFieldAlias(e,t){const l="popupTemplate"in t&&t.popupTemplate,s=l&&l.fieldInfos;let r=null;s&&s.some((t=>e===t.fieldName&&(r=t,!0)));let n=null;"getField"in t&&t.getField?n=t.getField(e):"fieldsIndex"in t&&t.fieldsIndex&&(n=t.fieldsIndex.get(e));const i=r||n;let a=null;return i&&(a=r&&r.label||n&&n.alias||"name"in i&&i.name||"fieldName"in i&&i.fieldName),a}_isUnclassedRenderer(e){const t=e.visualVariables;let l=!1;return ye(e)&&e.classBreakInfos&&1===e.classBreakInfos.length&&t&&(l=e.field?t.some((t=>!(!t||e.field!==t.field||(e.normalizationField||t.normalizationField)&&e.normalizationField!==t.normalizationField))):!!t.length),l}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"children",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])({readOnly:!0})],Pe.prototype,"effectList",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"layerView",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"layer",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"legendElements",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])({readOnly:!0})],Pe.prototype,"opacity",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"parent",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])({readOnly:!0,dependsOn:[]})],Pe.prototype,"ready",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"hideLayersNotInCurrentView",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"keepCacheOnDestroy",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"respectLayerVisibility",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])({readOnly:!0})],Pe.prototype,"scale",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"sublayerIds",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])({readOnly:!0})],Pe.prototype,"isScaleDriven",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"title",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])({readOnly:!0,dependsOn:["ready"],value:0})],Pe.prototype,"version",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__["property"])()],Pe.prototype,"view",void 0),Pe=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_19__["subclass"])("esri.widgets.Legend.support.ActiveLayerInfo")],Pe);const Ae=Pe;


/***/ }),

/***/ "G6bF":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/support/sizeRampUtils.js ***!
  \***************************************************************************/
/*! exports provided: REAL_WORLD_MAX_SIZE, REAL_WORLD_MIN_SIZE, getRampStops */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "REAL_WORLD_MAX_SIZE", function() { return u; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "REAL_WORLD_MIN_SIZE", function() { return c; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRampStops", function() { return S; });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Color.js */ "nvBr");
/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../symbols.js */ "H9eC");
/* harmony import */ var _renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../renderers/support/numberUtils.js */ "C3sy");
/* harmony import */ var _symbols_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../symbols/support/cimSymbolUtils.js */ "1EXT");
/* harmony import */ var _symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../symbols/support/utils.js */ "rI4C");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils.js */ "3lco");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u=30,c=12,m=[255,255,255],f=[200,200,200],p=[128,128,128],y=20,b=5;function d(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}function h(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}function v(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}function g(e){return"esri.symbols.TextSymbol"===e.declaredClass}function w(e,l){const t=e.length-1;return e.map(((e,n)=>Object(_utils_js__WEBPACK_IMPORTED_MODULE_5__["createStopLabel"])(e,n,t,l)))}async function S(e,l,n,i,o,a){var u,c;const m=l.legendOptions,f=m&&m.customValues,p=V(e,n),y=!!p,b=!!f,d=null!=l.minSize&&null!=l.maxSize,h=l.stops&&l.stops.length>1,v=!!l.target;if(!y||!b&&!(d||h&&!v))return;const g=Object(_symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_4__["isVolumetricSymbol"])(p);let S=null,k=null,j=null;k=g&&!h?Object(_renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_2__["round"])([l.minDataValue,l.maxDataValue]):f||await C(l,p,i,o);const L=null==e?void 0:e.authoringInfo,O="univariate-color-size"===(null==L?void 0:L.type),D=O&&"above-and-below"===(null==L?void 0:L.univariateTheme);if(!k&&h&&(k=l.stops.map((e=>e.value)),S=l.stops.some((e=>!!e.label)),S&&(j=l.stops.map((e=>e.label)))),g&&(null==(u=k)?void 0:u.length)>2&&!D&&(k=[k[0],k[k.length-1]]),!k)return null;O&&5!==(null==(c=k)?void 0:c.length)&&(k=I({minSize:k[0],maxSize:k[k.length-1]}));const E=g?z(e,k):null,T=Object(_symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_4__["getSymbolOutlineSize"])(p),q=S?null:w(k,a);return(await Promise.all(k.map((async(t,n)=>{const s=g?E[n]:await M(l,p,t,i,o);return{value:t,symbol:U(D&&"class-breaks"===e.type?x(e,n):p,s),label:S?j[n]:q[n],size:s,outlineSize:T}})))).reverse()}function z(e,l){const t=null==e?void 0:e.authoringInfo,n="univariate-color-size"===(null==t?void 0:t.type);let i=[c,u];if(n){const e=l[0],t=l[l.length-1],n=c,o=u;i=l.map((l=>n+(l-e)/(t-e)*(o-n)))}return n&&"below"===(null==t?void 0:t.univariateTheme)&&i.reverse(),i}function x(e,l){const t=e.classBreakInfos,n=t.length,i=n<2||!(l>=2)?t[0].symbol.clone():t[n-1].symbol.clone();return e.visualVariables.some((e=>"color"===e.type))&&(i.type.indexOf("3d")>-1?j(i):L(i)),i}function V(e,l){let t=null,n=null;if("simple"===e.type)t=e.symbol;else if("class-breaks"===e.type){const l=e.classBreakInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1}else if("unique-value"===e.type){const l=e.uniqueValueInfos;t=l&&l[0]&&l[0].symbol,n=l.length>1}return!t||k(t)?null:(t=t.clone(),(l||n)&&(t.type.indexOf("3d")>-1?j(t):L(t)),t)}function k(e){if(e){if(Object(_symbols_js__WEBPACK_IMPORTED_MODULE_1__["isSymbol3D"])(e)){return!!e.symbolLayers&&e.symbolLayers.some((e=>e&&"fill"===e.type))}return-1!==e.type.indexOf("fill")}return!1}function j(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:p}})):e.symbolLayers.forEach((e=>{"icon"!==e.type||e.resource&&e.resource.href?e.material={color:f}:(e.material={color:m},e.outline={color:p,size:1.5})}))}function L(l){"cim"===l.type?Object(_symbols_support_cimSymbolUtils_js__WEBPACK_IMPORTED_MODULE_3__["applyCIMSymbolColor"])(l,new _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"](f)):-1!==l.type.indexOf("line")?l.color=p:(l.color=m,"simple-marker"===l.type&&(l.outline={color:p,width:1.5}))}async function C(e,l,n,i){const o=(await Promise.resolve(/*! import() */).then(__webpack_require__.bind(null, /*! ../../../renderers/visualVariables/support/visualVariableUtils.js */ "0pea"))).getSizeRangeAtScale(e,n,i),s=o&&I(o);if(!o&&!s)return;let r=s.map((l=>O(l,e,o)));r=Object(_renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_2__["round"])(r);for(let t=1;t<r.length-1;t++){const o=await D(e,l,r[t],r[t-1],n,i);o&&(r[t]=o[0],s[t]=o[1])}return r}function I(e){const l=e.minSize,t=e.maxSize,n=b,i=(t-l)/(n-1),o=[];for(let s=0;s<n;s++)o.push(l+i*s);return o}function O(e,l,t){const n=t.minSize,i=t.maxSize,o=l.minDataValue,s=l.maxDataValue;let r=null;if(e<=n)r=o;else if(e>=i)r=s;else{r=(e-n)/(i-n)*(s-o)+o}return r}async function D(e,l,o,s,r,a){const u=await M(e,l,o,r,a),c=await M(e,l,s,r,a),m=Object(_renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_2__["numDigits"])(o),f=m.fractional,p=y;let b=m.integer,d=null,h=null;o>0&&o<1&&(d=10**f,b=Object(_renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_2__["numDigits"])(o*=d).integer);for(let n=b-1;n>=0;n--){const s=10**n;let m=Math.floor(o/s)*s,f=Math.ceil(o/s)*s;null!=d&&(m/=d,f/=d);let y=(m+f)/2;[,y]=Object(_renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_2__["round"])([m,y,f],{indexes:[1]});const b=await M(e,l,m,r,a),v=await M(e,l,f,r,a),g=await M(e,l,y,r,a),w=Object(_renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_2__["percentChange"])(u,b,c,null),S=Object(_renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_2__["percentChange"])(u,v,c,null),z=Object(_renderers_support_numberUtils_js__WEBPACK_IMPORTED_MODULE_2__["percentChange"])(u,g,c,null);let x=w.previous<=p,V=S.previous<=p;if(x&&V&&(w.previous<=S.previous?(x=!0,V=!1):(V=!0,x=!1)),x?h=[m,b]:V?h=[f,v]:z.previous<=p&&(h=[y,g]),h)break}return h}async function M(e,l,t,n,i){const{getSize:o}=await Promise.resolve(/*! import() */).then(__webpack_require__.bind(null, /*! ../../../renderers/visualVariables/support/visualVariableUtils.js */ "0pea"));return o(e,t,{scale:n,view:i,shape:"simple-marker"===l.type?l.style:null})}function U(e,t){const n=e.clone();if(Object(_symbols_js__WEBPACK_IMPORTED_MODULE_1__["isSymbol3D"])(n))Object(_symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_4__["isVolumetricSymbol"])(n)||n.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=t)}));else if(d(n))n.size=t;else if(h(n)){const e=n.width,l=n.height;n.height=t,n.width=t*(e/l)}else v(n)?n.width=t:g(n)&&n.font&&(n.font.size=t);return n}


/***/ }),

/***/ "HvrZ":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/support/styleUtils.js ***!
  \************************************************************************/
/*! exports provided: attachToNode, getTitle, isImageryStretchedLegend, isRendererTitle */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "attachToNode", function() { return t; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getTitle", function() { return r; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isImageryStretchedLegend", function() { return i; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isRendererTitle", function() { return o; });
/* harmony import */ var _intl_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../intl.js */ "G48n");
/* harmony import */ var _intl_substitute_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../intl/substitute.js */ "JV2H");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function n(e,n){return n}function t(e){const n=this;e.appendChild(n)}function r(t,r,i){if(!r)return;if("string"==typeof r||"number"==typeof r)return r;if("value"in r||"unit"in r)return Object(_intl_substitute_js__WEBPACK_IMPORTED_MODULE_1__["substitute"])(t.dotValue,r);if("colorName"in r||"bandName"in r)return t[r.colorName]+": "+(t[r.bandName]||r.bandName);if("showCount"in r)return r.showCount?t.clusterCountTitle:null;let l=null;return n(r,i)?l=r.ratioPercentTotal?"showRatioPercentTotal":r.ratioPercent?"showRatioPercent":r.ratio?"showRatio":r.normField?"showNormField":r.field?"showField":null:o(r,i)&&(l=r.normField?"showNormField":r.normByPct?"showNormPct":r.field?"showField":null),l?Object(_intl_substitute_js__WEBPACK_IMPORTED_MODULE_1__["substitute"])("showField"===l?"{field}":t[l],{field:r.field,normField:r.normField}):null}function o(e,n){return!n}function i(e,n){return!!(n&&"Stretched"===n&&e.version>=10.3&&"esri.layers.ImageryLayer"===e.declaredClass)}


/***/ }),

/***/ "Ilhi":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/sublayerUtils.js ***!
  \*******************************************************************/
/*! exports provided: isExportDynamic, isSublayerOverhaul, shouldWriteSublayerStructure */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isExportDynamic", function() { return n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isSublayerOverhaul", function() { return i; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "shouldWriteSublayerStructure", function() { return e; });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function e(e,n,i){const o=n.flatten((({sublayers:e})=>e)).length;if(o!==e.length)return!0;return!!e.some((e=>e.originIdOf("minScale")>i||e.originIdOf("maxScale")>i||e.originIdOf("renderer")>i||e.originIdOf("labelingInfo")>i||e.originIdOf("opacity")>i||e.originIdOf("labelsVisible")>i||e.originIdOf("source")>i))||!r(e,n)}function n(e,n,i){return!!e.some((e=>{const n=e.source;return!(!n||"map-layer"===n.type&&n.mapLayerId===e.id&&(!n.gdbVersion||n.gdbVersion===i.gdbVersion))||e.originIdOf("renderer")>2||e.originIdOf("labelingInfo")>2||e.originIdOf("opacity")>2||e.originIdOf("labelsVisible")>2}))||!r(e,n)}function r(e,n){if(!e||!e.length)return!0;const r=n.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).map((e=>e.id)).toArray();if(e.length>r.length)return!1;let i=0;const o=r.length;for(const{id:t}of e){for(;i<o&&r[i]!==t;)i++;if(i>=o)return!1}return!0}function i(e){return!!e&&e.some((e=>null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale))}


/***/ }),

/***/ "Lkqf":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/styles/Classic.js ***!
  \********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return A; });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "pO5D");
/* harmony import */ var _intl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../intl.js */ "G48n");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "WbKI");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "tQ+6");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/has.js */ "wSAH");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "zqDF");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "04ZG");
/* harmony import */ var _Widget_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../Widget.js */ "Ehpe");
/* harmony import */ var _support_relationshipUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./support/relationshipUtils.js */ "EIZL");
/* harmony import */ var _support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./support/univariateUtils.js */ "QwjU");
/* harmony import */ var _support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../support/styleUtils.js */ "HvrZ");
/* harmony import */ var _support_Heading_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../support/Heading.js */ "LOlD");
/* harmony import */ var _support_widgetUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../support/widgetUtils.js */ "cCpn");
/* harmony import */ var _support_decorators_messageBundle_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../support/decorators/messageBundle.js */ "dV4Z");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/Logger.js */ "6S2I");
/* harmony import */ var _support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../support/jsxFactory.js */ "2CIP");
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../intl/number.js */ "IeLS");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const u={service:"esri-legend__service",label:"esri-legend__service-label",layer:"esri-legend__layer",groupLayer:"esri-legend__group-layer",groupLayerChild:"esri-legend__group-layer-child",layerTable:"esri-legend__layer-table",layerTableSizeRamp:"esri-legend__layer-table--size-ramp",layerChildTable:"esri-legend__layer-child-table",layerCaption:"esri-legend__layer-caption",layerBody:"esri-legend__layer-body",layerRow:"esri-legend__layer-row",layerCell:"esri-legend__layer-cell",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",imageryLayerStretchedImage:"esri-legend__imagery-layer-image--stretched",imageryLayerCellStretched:"esri-legend__imagery-layer-cell--stretched",imageryLayerInfoStretched:"esri-legend__imagery-layer-info--stretched",symbolContainer:"esri-legend__layer-cell esri-legend__layer-cell--symbols",symbol:"esri-legend__symbol",rampContainer:"esri-legend__ramps",sizeRamp:"esri-legend__size-ramp",colorRamp:"esri-legend__color-ramp",opacityRamp:"esri-legend__opacity-ramp",borderlessRamp:"esri-legend__borderless-ramp",rampTick:"esri-legend__ramp-tick",rampFirstTick:"esri-legend__ramp-tick-first",rampLastTick:"esri-legend__ramp-tick-last",rampLabelsContainer:"esri-legend__ramp-labels",rampLabel:"esri-legend__ramp-label",univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label",message:"esri-legend__message",header:"esri-widget__heading",hidden:"esri-hidden"},_="esri-legend__",f=24,L={display:"flex",alignItems:"flex-start"},w={marginLeft:"3px"},C={display:"table-cell",verticalAlign:"middle"};let R=class extends _Widget_js__WEBPACK_IMPORTED_MODULE_7__["default"]{constructor(e,r){super(e,r),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){const e=this.activeLayerInfos,r=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",null,r&&r.length?r:Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.message},this.messages.noLegend))}_renderLegendForLayer(e){if(!e.ready)return null;const r=!!e.children.length,l=`${_}${e.layer.uid}-version-${e.version}`,a=e.title?Object(_support_Heading_js__WEBPACK_IMPORTED_MODULE_11__["Heading"])({level:this.headingLevel,class:this.classes(u.header,u.label)},e.title):null;if(r){const r=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{key:l,class:this.classes(u.service,u.groupLayer)},a,r)}{const r=e.legendElements;if(r&&!r.length)return null;const s=r.map((r=>this._renderLegendForElement(r,e.layer,e.effectList))).filter((e=>!!e));if(!s.length)return null;const t={[u.groupLayerChild]:!!e.parent};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{key:l,class:this.classes(u.service,t),tabIndex:0},a,Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.layer},s))}}_renderLegendForElement(e,r,l,a){const t="color-ramp"===e.type,i="opacity-ramp"===e.type,n="size-ramp"===e.type;let o=null;if("symbol-table"===e.type||n){const a=e.infos.map((a=>this._renderLegendForElementInfo(a,r,l,n,e.legendType))).filter((e=>!!e));a.length&&(o=Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.layerBody},a))}else"color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type||"stretch-ramp"===e.type?o=this._renderLegendForRamp(e,r.opacity):"relationship-ramp"===e.type?o=Object(_support_relationshipUtils_js__WEBPACK_IMPORTED_MODULE_8__["renderRelationshipRamp"])(e,this.id,r.opacity,l):"univariate-above-and-below-ramp"===e.type?o=this._renderUnivariateAboveAndBelowRamp(e,r.opacity,l):"univariate-color-size-ramp"===e.type&&(o=this._renderUnivariateColorSizeRamp(e,r.opacity,l));if(!o)return null;const p=e.title;let c=null;if("string"==typeof p)c=p;else if(p){const e=Object(_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["getTitle"])(this.messages,p,t||i);c=Object(_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["isRendererTitle"])(p,t||i)&&p.title?`${p.title} (${e})`:e}const m=a?u.layerChildTable:u.layerTable,g=c?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.layerCaption},c):null,v={[u.layerTableSizeRamp]:n||!a};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:this.classes(m,v)},g,o)}_renderUnivariateAboveAndBelowRamp(e,r,l){const{sizeRampElement:a,colorRampElement:s}=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateAboveAndBelowRampElements"])(e,r);if(!a)return null;const p=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateColorRampSize"])(a,"above",!0),d=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateColorRampSize"])(a,"below",!0),y=12,m=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateColorRampPreview"])(s,{width:y,height:p,rampAlignment:"vertical",opacity:r,type:"above",effectList:l}),g=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateColorRampPreview"])(s,{width:y,height:d,rampAlignment:"vertical",opacity:r,type:"below",effectList:l}),v=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateColorRampMargin"])(a),b=a.infos.map((e=>e.label)),_=b.map(((e,r)=>{const l=2===r;return 0===r?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{key:r,class:e?m?u.univariateAboveAndBelowLabel:u.rampLabel:null},e):l?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",null):null})),f=b.length-1,R=Math.floor(b.length/2),A=b.map(((e,r)=>r===R||r===f?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{key:r,class:e?m?u.univariateAboveAndBelowLabel:u.rampLabel:null},e):null)),S={display:"table-cell",verticalAlign:"middle"},j={marginTop:`${v}px`},I={height:`${p}px`},k={height:`${d}px`};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{key:"univariate-above-and-below-ramp-preview",styles:L},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.layerBody},a.infos.map(((e,r)=>Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:this.classes(u.layerRow,u.sizeRamp)},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.symbol,styles:S,bind:e.preview,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["attachToNode"]}),m||r%2!=0?null:Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.layerInfo},b[r]))))),m?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:j,key:"color-ramp-preview"},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:w},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:C},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.rampContainer,bind:m,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["attachToNode"]})),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:C},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.rampLabelsContainer,styles:I},_))),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:w},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:C},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.rampContainer,bind:g,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["attachToNode"]})),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:C},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.rampLabelsContainer,styles:k},A)))):null)}_renderUnivariateColorSizeRamp(e,r,l){const{sizeRampElement:a,colorRampElement:s}=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateColorSizeRampElements"])(e);if(!a)return null;const t=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateColorRampMargin"])(a),d=12,y=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateColorRampSize"])(a,"full",!1),m=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_9__["getUnivariateColorRampPreview"])(s,{width:d,height:y,rampAlignment:"vertical",opacity:r,type:"full",effectList:l}),g=a.infos.length-1,v=a.infos.map(((e,r)=>0===r||r===g?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{key:r,class:e.label?s?u.univariateAboveAndBelowLabel:u.rampLabel:null},e.label):null)),b={display:"table-cell",verticalAlign:"middle"},_={marginTop:`${t}px`},f={height:`${y}px`};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{key:"univariate-above-and-below-ramp-preview",styles:L},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.layerBody},a.infos.map((e=>Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:this.classes(u.layerRow,u.sizeRamp)},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.symbol,styles:b,bind:e.preview,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["attachToNode"]}))))),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:_,key:"color-ramp-preview"},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:w},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:C},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.rampContainer,bind:m,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["attachToNode"]})),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{styles:C},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.rampLabelsContainer,styles:f},v)))))}_renderLegendForRamp(e,r){const l=e.infos,a="opacity-ramp"===e.type,s="heatmap-ramp"===e.type,t="stretch-ramp"===e.type,i=e.preview,n=a?u.opacityRamp:"";i.className=`${u.colorRamp} ${n}`,null!=r&&(i.style.opacity=r.toString());const o=l.map((e=>Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:e.label?u.rampLabel:null},s?this.messages[e.label]:t?this._getStretchStopLabel(e):e.label))),p={width:`${f}px`},d={height:i.style.height};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.layerRow},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.symbolContainer,styles:p},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.rampContainer,bind:i,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["attachToNode"]})),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.layerInfo},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.rampLabelsContainer,styles:d},o)))}_getStretchStopLabel(e){return e.label?this.messages[e.label]+": "+("string"==typeof e.value?e.value:Object(_intl_number_js__WEBPACK_IMPORTED_MODULE_16__["formatNumber"])(e.value,{style:"decimal",notation:e.value.toString().indexOf("e")>-1?"scientific":"standard"})):""}_renderLegendForElementInfo(e,r,l,a,s){if(e.type)return this._renderLegendForElement(e,r,l,!0);let t=null;const i=Object(_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["isImageryStretchedLegend"])(r,s);if(e.preview?t=Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.symbol,bind:e.preview,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["attachToNode"]}):e.src&&(t=this._renderImage(e,r,i)),!t)return null;const n={[u.imageryLayerInfoStretched]:i},o={[u.imageryLayerInfoStretched]:i,[u.sizeRamp]:!i&&a};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:u.layerRow},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:this.classes(u.symbolContainer,o)},t),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("div",{class:this.classes(u.layerInfo,n)},Object(_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["getTitle"])(this.messages,e.label,!1)||""))}_renderImage(e,r,l){const{label:a,src:s,opacity:t}=e,i={[u.imageryLayerStretchedImage]:l,[u.symbol]:!l},n={opacity:`${null!=t?t:r.opacity}`};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_15__["tsx"])("img",{alt:Object(_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__["getTitle"])(this.messages,a,!1),src:s,border:0,width:e.width,height:e.height,class:this.classes(i),styles:n})}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__["property"])()],R.prototype,"activeLayerInfos",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__["property"])()],R.prototype,"headingLevel",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__["property"])(),Object(_support_decorators_messageBundle_js__WEBPACK_IMPORTED_MODULE_13__["messageBundle"])("esri/widgets/Legend/t9n/Legend")],R.prototype,"messages",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__["property"])({readOnly:!0})],R.prototype,"type",void 0),R=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__["subclass"])("esri.widgets.Legend.styles.Classic")],R);const A=R;


/***/ }),

/***/ "QwjU":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/styles/support/univariateUtils.js ***!
  \************************************************************************************/
/*! exports provided: getUnivariateAboveAndBelowRampElements, getUnivariateColorRampMargin, getUnivariateColorRampPreview, getUnivariateColorRampSize, getUnivariateColorSizeRampElements, getUnivariateSizeRampSize */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUnivariateAboveAndBelowRampElements", function() { return d; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUnivariateColorRampMargin", function() { return m; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUnivariateColorRampPreview", function() { return v; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUnivariateColorRampSize", function() { return y; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUnivariateColorSizeRampElements", function() { return g; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getUnivariateSizeRampSize", function() { return h; });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/screenUtils.js */ "qRWG");
/* harmony import */ var _libs_maquette_projection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../libs/maquette/projection.js */ "5sKF");
/* harmony import */ var _libs_maquette_projector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../libs/maquette/projector.js */ "aelY");
/* harmony import */ var _symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../symbols/support/symbolUtils.js */ "vvhm");
/* harmony import */ var _support_widgetUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../support/widgetUtils.js */ "cCpn");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/has.js */ "wSAH");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/Logger.js */ "6S2I");
/* harmony import */ var _support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../support/jsxFactory.js */ "2CIP");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const l=Object(_libs_maquette_projector_js__WEBPACK_IMPORTED_MODULE_2__["createProjector"])(),r=10,n=20,s=10,a=20,c={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function f(e="vertical"){const t="stroke:rgb(200, 200, 200);stroke-width:1";return"vertical"===e?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_7__["tsx"])("svg",{height:"4",width:"10"},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_7__["tsx"])("line",{x1:"0",y1:"2",x2:"10",y2:"2",style:t})):Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_7__["tsx"])("svg",{height:"10",width:"10"},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_7__["tsx"])("line",{x1:"5",y1:"0",x2:"5",y2:"10",style:t}))}function p(e,t="vertical"){const o=document.createElement("div");return o.style.height=`${n}px`,o.className=c.univariateAboveAndBelowSymbol,null!=e&&(o.style.opacity=e.toString()),l.append(o,f.bind(null,t)),o}function u(t,o,i="vertical",l){t.infos.forEach(((t,r)=>{if(l&&2===r)t.preview=p(o,i);else{const o=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__["pt2px"])(t.size)+("horizontal"===i?a:s),l="div"===t.preview.tagName.toLowerCase(),r=l?t.preview:document.createElement("div");r.className=c.univariateAboveAndBelowSymbol,"horizontal"===i?r.style.width=`${o}px`:r.style.height=`${o}px`,l||r.appendChild(t.preview),t.preview=r}}))}function m(t,o="classic"){const i=t.infos;return"classic"===o?(Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__["pt2px"])(i[0].size)+s)/2:(Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__["pt2px"])(i[0].size)-Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__["pt2px"])(i[i.length-1].size))/2}function v(e,t){if(!e)return null;const i=e.infos.map((e=>e.color)),l=Object(_symbols_support_symbolUtils_js__WEBPACK_IMPORTED_MODULE_3__["renderColorRampPreviewHTML"])("full"===t.type?i:"above"===t.type?i.slice(0,3):i.slice(2,5),{width:t.width,height:t.height,align:t.rampAlignment,effectList:t.effectList});return l.className=c.colorRamp,null!=t.opacity&&(l.style.opacity=t.opacity.toString()),l}function h(t,o,i,l="vertical"){let c=0;const f=t.infos,p=Math.floor(f.length/2),u="full"===o||"above"===o?0:p,m="full"===o||"below"===o?f.length-1:p;for(let v=u;v<=m;v++)if(i&&v===p)c+="horizontal"===l?r:n;else{c+=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__["pt2px"])(f[v].size)+("horizontal"===l?a:s)}return Math.round(c)}function y(t,o,i,l="vertical"){const c=h(t,o,i,l),f=t.infos,p=Math.floor(f.length/2),u="full"===o||"above"===o?0:p,m="full"===o||"below"===o?f.length-1:p,v="full"===o?f[u].size+f[m].size:"above"===o?f[u].size:f[m].size,y=i?"vertical"===l?n:r:0,d="vertical"===l?s*("full"===o?2:1):a*("full"===o?2:1);return Math.round(c-(Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__["pt2px"])(v)/2+y/2+d/2))}function d(e,t,o="vertical"){const i=e.infos;let l=i.filter((({type:e})=>"size-ramp"===e))[0],r=i.filter((({type:e})=>"color-ramp"===e))[0];var n,s;(l&&(l={...l},l.infos=[...l.infos],u(l,t,o,!0)),r&&(r={...r},r.infos=[...r.infos]),"horizontal"===o)&&(null==(n=l)||n.infos.reverse(),null==(s=r)||s.infos.reverse());return{sizeRampElement:l,colorRampElement:r}}function g(e,t="vertical"){const o=e.infos;let i=o.filter((({type:e})=>"size-ramp"===e))[0],l=o.filter((({type:e})=>"color-ramp"===e))[0];var r,n;(i&&(i={...i},i.infos=[...i.infos],u(i,null,t,!1)),l&&(l={...l},l.infos=[...l.infos]),"horizontal"===t)&&(null==(r=i)||r.infos.reverse(),null==(n=l)||n.infos.reverse());return{sizeRampElement:i,colorRampElement:l}}


/***/ }),

/***/ "WvcR":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/styles/Card.js ***!
  \*****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return j; });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "pO5D");
/* harmony import */ var _intl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../intl.js */ "G48n");
/* harmony import */ var _core_Handles_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Handles.js */ "r0DZ");
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/screenUtils.js */ "qRWG");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "WbKI");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "tQ+6");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/has.js */ "wSAH");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "zqDF");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "04ZG");
/* harmony import */ var _symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../symbols/support/svgUtils.js */ "7wGN");
/* harmony import */ var _symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../symbols/support/utils.js */ "rI4C");
/* harmony import */ var _Widget_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../Widget.js */ "Ehpe");
/* harmony import */ var _support_relationshipUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./support/relationshipUtils.js */ "EIZL");
/* harmony import */ var _support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./support/univariateUtils.js */ "QwjU");
/* harmony import */ var _support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../support/styleUtils.js */ "HvrZ");
/* harmony import */ var _support_Heading_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../support/Heading.js */ "LOlD");
/* harmony import */ var _support_decorators_accessibleHandler_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../support/decorators/accessibleHandler.js */ "h1D1");
/* harmony import */ var _support_decorators_messageBundle_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../support/decorators/messageBundle.js */ "dV4Z");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../core/Logger.js */ "6S2I");
/* harmony import */ var _support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../support/jsxFactory.js */ "2CIP");
/* harmony import */ var _support_widgetUtils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../support/widgetUtils.js */ "cCpn");
/* harmony import */ var _intl_substitute_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../intl/substitute.js */ "JV2H");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const C={activated:"esri-legend--card__carousel-indicator--activated",base:"esri-legend--card",stacked:"esri-legend--stacked",carouselTitle:"esri-legend--card__carousel-title",indicator:"esri-legend--card__carousel-indicator",intervalSeparator:"esri-legend--card__interval-separator",imageryLayerStretchedImage:"esri-legend--card__imagery-layer-image--stretched",imageLabel:"esri-legend--card__image-label",layerCaption:"esri-legend--card__layer-caption",labelElement:"esri-legend--card__label-element",layerRow:"esri-legend--card__layer-row",labelCell:"esri-legend--card__label-cell",message:"esri-legend--card__message",rampLabel:"esri-legend--card__ramp-label",section:"esri-legend--card__section",relationshipSection:"esri-legend--card__relationship-section",serviceCaptionText:"esri-legend--card__service-caption-text",serviceContent:"esri-legend--card__service-content",service:"esri-legend--card__service",groupLayer:"esri-legend--card__group-layer",groupLayerChild:"esri-legend--card__group-layer-child",symbol:"esri-legend--card__symbol",sizeRampRow:"esri-legend--card__size-ramp-row",symbolRow:"esri-legend--card__symbol-row",symbolCell:"esri-legend--card__symbol-cell",indicatorContainer:"esri-legend--card__carousel-indicator-container",intervalSeparatorsContainer:"esri-legend--card__interval-separators-container",relationshipLabelContainer:"esri-legend--card__relationship-label-container",labelContainer:"esri-legend--card__label-container",serviceCaptionContainer:"esri-legend--card__service-caption-container",symbolContainer:"esri-legend--card__symbol-container",sizeRampContainer:"esri-legend--card__size-ramp-container",sizeRampPreview:"esri-legend--card__size-ramp-preview",rampContainer:"esri-legend__ramps",sizeRampHorizontal:"esri-legend__size-ramp--horizontal",rampLabelsContainer:"esri-legend__ramp-labels",layerInfo:"esri-legend__layer-cell esri-legend__layer-cell--info",univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card",hidden:"esri-hidden"},x=25,S=25,z=768,R=100,$="#ddd",I=window.devicePixelRatio;function k(e){if(e){if(e.type.indexOf("3d")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const s=e.symbolLayers.getItemAt(t-1),i=s.resource&&s.resource.primitive;return"circle"===i||"cross"===i||"kite"===i||"sphere"===i||"cube"===i||"diamond"===i}{const t=e.style;return"circle"===t||"diamond"===t||"cross"===t}}}function N(e){if(e){if(e.type.indexOf("3d")>-1){const t=e.symbolLayers&&e.symbolLayers.length;if(!t)return;const s=e.symbolLayers.getItemAt(t-1).get("resource.primitive");return"triangle"===s||"cone"===s||"tetrahedron"===s}return"triangle"===e.style}}let A=class extends _Widget_js__WEBPACK_IMPORTED_MODULE_11__["default"]{constructor(e,s){super(e,s),this._handles=new _core_Handles_js__WEBPACK_IMPORTED_MODULE_2__["default"],this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout="stack",this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.own([this.watch("activeLayerInfos",(e=>{this._handles.removeAll(),this._watchForSectionChanges(e)}))])}destroy(){this._handles.destroy(),this._handles=null}render(){this._hasIndicators="auto"===this.layout&&this.view.container.clientWidth<=z||"stack"===this.layout;const e=this.activeLayerInfos,t=e&&e.toArray().map((e=>this._renderLegendForLayer(e))).filter((e=>!!e));this._hasIndicators?this._selectedSectionName&&-1!==this._sectionNames.indexOf(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;const s=this._sectionNames.length,i=this._sectionNames.map(((e,t)=>{const i=Object(_intl_substitute_js__WEBPACK_IMPORTED_MODULE_21__["substitute"])(this.messagesCommon.pagination.pageText,{index:t+1,total:s});return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:e,role:"tab",id:e,"aria-label":i,"aria-controls":`${e}-panel`,"aria-selected":(this._selectedSectionName===e).toString(),tabIndex:this._selectedSectionName===e?0:-1,title:i,onclick:this._selectSection,onkeydown:this._focusSection,bind:this,class:this.classes(C.indicator,{[C.activated]:this._selectedSectionName===e}),"data-section-name":e})})),r=this._hasIndicators&&s>1?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.indicatorContainer,key:"carousel-navigation",role:"tablist"},i):null,a=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):t&&t.length?t:null,o={[C.stacked]:this._hasIndicators};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:this.classes(C.base,o)},a||Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.message},this.messages.noLegend),r)}_selectSection(e){const t=e.target.getAttribute("data-section-name");t&&(this._selectedSectionName=t)}_focusSection(e){switch(e.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(e);break;case"Enter":case" ":this._selectSection(e)}}_switchSectionOnArrowPress(e){const t=e.key,s="ArrowLeft"===t?-1:1,i=e.target.getAttribute("data-section-name"),r=this._sectionNames.indexOf(i),a=this._sectionNames;let o=null;-1!==r&&(a[r+s]?o=document.getElementById(a[r+s]):"ArrowLeft"===t?o=document.getElementById(a[a.length-1]):"ArrowRight"===t&&(o=document.getElementById(a[0])),o&&o.focus())}_watchForSectionChanges(e){if(this._generateSectionNames(),e){e.forEach((e=>{const t=`activeLayerInfo-${e.layer.uid}-version-change`;this._handles.remove(t),this._watchForSectionChanges(e.children),this._handles.add(e.watch("version",(()=>this._generateSectionNames())),t)}));const t="activeLayerInfos-collection-change";this._handles.remove(t),this._handles.add(e.on("change",(()=>this._watchForSectionChanges(e))),t)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(e,t,s){return`${this.id}${e.uid}-type-${t.type}-${s}`}_generateSectionNamesForActiveLayerInfo(e){e.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),e.legendElements&&e.legendElements.forEach(((t,s)=>{this._sectionNames.push(this._getSectionName(e.layer,t,s))}))}_renderLegendForLayer(e){if(!e.ready)return null;if(e.children.length){const t=e.children.map((e=>this._renderLegendForLayer(e))).toArray();return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:e.layer.uid,class:this.classes(C.service,C.groupLayer)},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.serviceCaptionContainer},e.title),t)}{const t=e.legendElements;if(t&&!t.length)return null;const s=t.some((e=>"relationship-ramp"===e.type)),i=t.map(((t,i)=>this._renderLegendForElement(t,e,i,s))).filter((e=>!!e));if(!i.length)return null;const r={[C.groupLayerChild]:!!e.parent};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:e.layer.uid,class:this.classes(C.service,r)},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.serviceCaptionContainer},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.serviceCaptionText},e.title)),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.serviceContent},i))}}_renderLegendForElement(e,t,s,i=!1){const r="color-ramp"===e.type,a="opacity-ramp"===e.type,o="size-ramp"===e.type,l=t.layer;let c=null;if("string"==typeof e.title)c=e.title;else if(e.title){const t=e.title,s=Object(_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["getTitle"])(this.messages,t,r||a);c=t.title?`${t.title} (${s})`:s}const d=this._getSectionName(l,e,s),p=this._hasIndicators?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",null,Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])(_support_Heading_js__WEBPACK_IMPORTED_MODULE_15__["Heading"],{level:this.headingLevel,class:C.carouselTitle},t.title),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])(_support_Heading_js__WEBPACK_IMPORTED_MODULE_15__["Heading"],{level:this.headingLevel+1,class:C.layerCaption},c)):c?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])(_support_Heading_js__WEBPACK_IMPORTED_MODULE_15__["Heading"],{level:this.headingLevel,class:C.layerCaption},c):null,m=t.effectList;let h=null;if("symbol-table"===e.type){const s=e.infos.map(((s,i)=>this._renderLegendForElementInfo(s,t,e.legendType,i))).filter((e=>!!e));if(s.length){const e=s[0].properties.classes&&s[0].properties.classes[C.symbolRow],t={[C.labelContainer]:!e&&!i,[C.relationshipLabelContainer]:i};h=Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:this.classes(t)},s)}}else"color-ramp"===e.type||"opacity-ramp"===e.type||"heatmap-ramp"===e.type?h=this._renderLegendForRamp(e,l.opacity,m):o?h=this._renderSizeRamp(e,l.opacity):"relationship-ramp"===e.type?h=Object(_support_relationshipUtils_js__WEBPACK_IMPORTED_MODULE_12__["renderRelationshipRamp"])(e,this.id,l.opacity,m):"univariate-above-and-below-ramp"===e.type?h=this._renderUnivariateAboveAndBelowRamp(e,l.opacity,m):"univariate-color-size-ramp"===e.type&&(h=this._renderUnivariateColorSizeRamp(e,l.opacity,m));if(!h)return null;const y=Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:d,class:C.section,id:`${d}-panel`,role:"tabpanel","aria-labelledby":d,tabIndex:0},[p,h]);return this._sectionMap.set(d,y),y}_renderUnivariateAboveAndBelowRamp(e,t,s){const{sizeRampElement:i,colorRampElement:r}=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateAboveAndBelowRampElements"])(e,t,"horizontal");if(!i)return null;const a=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateSizeRampSize"])(i,"full",!0,"horizontal"),o=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateColorRampSize"])(i,"above",!0,"horizontal"),l=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateColorRampSize"])(i,"below",!0,"horizontal"),n=12,y=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateColorRampPreview"])(r,{width:o,height:n,rampAlignment:"horizontal",opacity:t,type:"above",effectList:s}),g=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateColorRampPreview"])(r,{width:l,height:n,rampAlignment:"horizontal",opacity:t,type:"below",effectList:s}),v=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateColorRampMargin"])(i,"card"),u=i.infos.map((e=>e.label)),f=u.length-1,b=u.map(((e,t)=>0===t||t===f?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:t},e):null)),L={display:"flex",flexDirection:"column"},x={display:"flex",flexDirection:"row"},S={marginTop:"3px",marginLeft:`${v}px`,display:"flex"},z={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.layerRow,key:"size-ramp-preview",styles:L},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:this.classes(C.symbolContainer,C.sizeRampHorizontal),styles:x},i.infos.map(((e,t)=>Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:t,class:C.symbol,bind:e.preview,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"]})))),y?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.univariateAboveAndBelowColorRamp,styles:S,key:"color-ramp-preview"},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{bind:y,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"]}),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{bind:g,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"]})):null,Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.layerInfo},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.rampLabelsContainer,styles:z},b)))}_renderUnivariateColorSizeRamp(e,t,s){const{sizeRampElement:i,colorRampElement:r}=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateColorSizeRampElements"])(e,"horizontal");if(!i)return null;const a=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateSizeRampSize"])(i,"full",!1,"horizontal"),o=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateColorRampSize"])(i,"full",!1,"horizontal"),l=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateColorRampPreview"])(r,{width:o,height:12,rampAlignment:"horizontal",opacity:t,type:"full",effectList:s}),n=Object(_support_univariateUtils_js__WEBPACK_IMPORTED_MODULE_13__["getUnivariateColorRampMargin"])(i,"card"),c=i.infos.length-1,g=i.infos.map(((e,t)=>0===t||t===c?Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:t},e.label):null)),v={display:"flex",flexDirection:"column"},u={display:"flex",flexDirection:"row"},f={marginTop:"3px",marginLeft:`${n}px`,display:"flex"},b={width:`${a}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.layerRow,key:"size-ramp-preview",styles:v},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:this.classes(C.symbolContainer,C.sizeRampHorizontal),styles:u},i.infos.map(((e,t)=>Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:t,class:C.symbol,bind:e.preview,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"]})))),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.univariateAboveAndBelowColorRamp,styles:f,key:"color-ramp-preview"},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{bind:l,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"]})),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.layerInfo},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.rampLabelsContainer,styles:b},g)))}_renderLegendForElementInfo(e,t,s,i){const r=t.layer;if(e.type)return this._renderLegendForElement(e,t,i);const a=Object(_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["isImageryStretchedLegend"])(r,s);if(e.preview){var l,n;if(!e.symbol||-1===e.symbol.type.indexOf("simple-fill")){if(!e.label)return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:i,bind:e.preview,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"]});const t={[C.symbolCell]:this._hasIndicators};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:i,class:this.classes(C.layerRow,{[C.symbolRow]:this._hasIndicators})},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:this.classes(t),bind:e.preview,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"]}),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:this.classes(C.imageLabel,{[C.labelCell]:this._hasIndicators})},Object(_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["getTitle"])(this.messages,e.label,!1)||""))}let s=255,a=255,c=255,d=0,p=255,m=255,h=255,y=0;const v=e.symbol.color&&e.symbol.color.a,u=e.symbol.outline&&e.symbol.outline.color&&e.symbol.outline.color.a;v&&(s=e.symbol.color.r,a=e.symbol.color.g,c=e.symbol.color.b,d=e.symbol.color.a*r.opacity),u&&(p=e.symbol.outline.color.r,m=e.symbol.outline.color.g,h=e.symbol.outline.color.b,y=e.symbol.outline.color.a*r.opacity);const f=null==(l=null==(n=e.symbol.color)?void 0:n.isBright)||l,b=f?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",L={background:v?`rgba(${s}, ${a}, ${c}, ${d})`:"none",color:f?"black":"white",textShadow:`-1px -1px 0 ${b},\n                                              1px -1px 0 ${b},\n                                              -1px 1px 0 ${b},\n                                              1px 1px 0 ${b}`,border:u?`1px solid rgba(${p}, ${m}, ${h}, ${y})`:"none",filter:Object(_symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_10__["getCSSFilterFromEffectList"])(t.effectList)};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:i,class:C.layerRow},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.labelElement,styles:L}," ",e.label," "))}if(e.src){const t=this._renderImage(e,r,a);return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{key:i,class:C.layerRow},t,Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.imageLabel},e.label||""))}}_renderImage(e,t,s){const{label:i,src:r,opacity:a}=e,o={[C.imageryLayerStretchedImage]:s,[C.symbol]:!s},l={opacity:`${null!=a?a:t.opacity}`};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("img",{alt:Object(_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["getTitle"])(this.messages,i,!1),src:r,border:0,width:e.width,height:e.height,class:this.classes(o),styles:l})}_renderSizeRampLines(e){const t=e.infos,i=t[0],r=t[t.length-1],a=i.symbol,o=this._hasIndicators,l=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__["pt2px"])(i.size+i.outlineSize)*I,n=Object(_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_3__["pt2px"])(r.size+r.outlineSize)*I,c=o?l:l+50*I,d=o?l/2+50*I:l,p=N(a),m=k(a),h=document.createElement("canvas");h.width=c,h.height=d,h.style.width=h.width/I+"px",h.style.height=h.height/I+"px";const y=h.getContext("2d");if(o){y.beginPath();const e=0,t=0,s=c/2-n/2,i=d;y.moveTo(e,t),y.lineTo(s,i);const r=c,a=0,o=c/2+n/2,l=d;y.moveTo(r,a),y.lineTo(o,l)}else{y.beginPath();const e=0,t=d/2-n/2,s=c,i=0;y.moveTo(e,t),y.lineTo(s,i);const r=0,a=d/2+n/2,o=c,l=d;y.moveTo(r,a),y.lineTo(o,l)}return y.strokeStyle=$,y.stroke(),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{bind:h,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"],styles:o?{display:"flex",marginTop:`-${p?0:m?l/2:0}px`,marginBottom:`-${p?n:m?n/2:0}px`}:{display:"flex",marginRight:`-${p?0:m?l/2:0}px`,marginLeft:`-${p?0:m?n/2:0}px`}})}_renderSizeRamp(e,t){const s=e.infos,i=s[0].label,r=s[s.length-1].label;let a=s[0].preview,o=s[s.length-1].preview;const l=this._hasIndicators,n={"flex-direction":l?"column":"row-reverse"};a&&(a=a.cloneNode(!0),a.style.display="flex"),o&&(o=o.cloneNode(!0),o.style.display="flex");const c={opacity:null!=t?`${t}`:""};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:this.classes(C.layerRow,{[C.sizeRampRow]:l})},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.rampLabel},l?i:r),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.sizeRampContainer,styles:n},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{bind:a,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"],class:C.sizeRampPreview,styles:c}),this._renderSizeRampLines(e),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{bind:o,afterCreate:_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_14__["attachToNode"],class:C.sizeRampContainer,styles:c})),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.rampLabel},l?r:i))}_renderLegendForRamp(e,t,s){const i=e.infos,r="heatmap-ramp"===e.type,l=i.length-1,n=S,c=l>2&&!r?x*l:R,d=c+20,p=10,m=i.slice(0).reverse();m.forEach(((e,t)=>{e.offset=r?e.ratio:t/l}));const h=m.length-1,y=m.length%2!=0&&m[m.length/2|0],g=y&&Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.intervalSeparatorsContainer},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.intervalSeparator},"|"),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.rampLabel},y.label)),_=i[i.length-1].label,v=i[0].label,u=[[{shape:{type:"path",path:`M0 ${n/2} L${p} 0 L${p} ${n} Z`},fill:m[0].color,stroke:{width:0}},{shape:{type:"rect",x:p,y:0,width:c,height:n},fill:{type:"linear",x1:p,y1:0,x2:c+p,y2:0,colors:m},stroke:{width:0}},{shape:{type:"path",path:`M${c+p} 0 L${d} ${n/2} L${c+p} ${n} Z`},fill:m[h].color,stroke:{width:0}}]],f=Object(_symbols_support_svgUtils_js__WEBPACK_IMPORTED_MODULE_9__["renderSVG"])(u,d,n),{messages:b}=this,L={filter:Object(_symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_10__["getCSSFilterFromEffectList"])(s),opacity:null==t?null:`${t}`};return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.layerRow},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.rampLabel},r?b[_]:_),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.symbolContainer},Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{styles:L},f),g),Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_19__["tsx"])("div",{class:C.rampLabel},r?b[v]:v))}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__["property"])()],A.prototype,"activeLayerInfos",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__["property"])()],A.prototype,"headingLevel",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__["property"])()],A.prototype,"layout",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__["property"])(),Object(_support_decorators_messageBundle_js__WEBPACK_IMPORTED_MODULE_17__["messageBundle"])("esri/widgets/Legend/t9n/Legend")],A.prototype,"messages",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__["property"])(),Object(_support_decorators_messageBundle_js__WEBPACK_IMPORTED_MODULE_17__["messageBundle"])("esri/t9n/common")],A.prototype,"messagesCommon",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__["property"])({readOnly:!0})],A.prototype,"type",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__["property"])()],A.prototype,"view",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_support_decorators_accessibleHandler_js__WEBPACK_IMPORTED_MODULE_16__["accessibleHandler"])()],A.prototype,"_selectSection",null),A=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__["subclass"])("esri.widgets.Legend.styles.Card")],A);const j=A;


/***/ }),

/***/ "XQ5H":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/support/heatmapRampUtils.js ***!
  \******************************************************************************/
/*! exports provided: getHeatmapRampStops */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getHeatmapRampStops", function() { return r; });
/* harmony import */ var _renderers_support_HeatmapColorStop_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../renderers/support/HeatmapColorStop.js */ "2uuY");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function r(r){let t=r.colorStops,e=t.length-1;if(t&&t[0]){const r=t[e];r&&1!==r.ratio&&(t=t.slice(0),t.push(new _renderers_support_HeatmapColorStop_js__WEBPACK_IMPORTED_MODULE_0__["default"]({ratio:1,color:r.color})),e++)}return t.map(((o,r)=>{let t="";return 0===r?t="low":r===e&&(t="high"),{color:o.color,label:t,ratio:o.ratio}})).reverse()}


/***/ }),

/***/ "ire8":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return L; });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/tslib.es6.js */ "pO5D");
/* harmony import */ var _core_Handles_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/Handles.js */ "r0DZ");
/* harmony import */ var _core_watchUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/watchUtils.js */ "N5XI");
/* harmony import */ var _core_accessorSupport_decorators_aliasOf_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/accessorSupport/decorators/aliasOf.js */ "Stxv");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/arrayUtils.js */ "tQ+6");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/has.js */ "wSAH");
/* harmony import */ var _core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/accessorSupport/decorators/cast.js */ "Gj5k");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/accessorSupport/decorators/property.js */ "WbKI");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/accessorSupport/decorators/subclass.js */ "04ZG");
/* harmony import */ var _Widget_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Widget.js */ "Ehpe");
/* harmony import */ var _Legend_LegendViewModel_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./Legend/LegendViewModel.js */ "li9b");
/* harmony import */ var _Legend_styles_Card_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./Legend/styles/Card.js */ "WvcR");
/* harmony import */ var _Legend_styles_Classic_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./Legend/styles/Classic.js */ "Lkqf");
/* harmony import */ var _support_widgetUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./support/widgetUtils.js */ "cCpn");
/* harmony import */ var _support_decorators_messageBundle_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./support/decorators/messageBundle.js */ "dV4Z");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../core/Logger.js */ "6S2I");
/* harmony import */ var _support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./support/jsxFactory.js */ "2CIP");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const g={base:"esri-legend",widget:"esri-widget",panel:"esri-widget--panel",widgetIcon:"esri-icon-layer-list"};let f=class extends _Widget_js__WEBPACK_IMPORTED_MODULE_9__["default"]{constructor(e,t){super(e,t),this._handles=new _core_Handles_js__WEBPACK_IMPORTED_MODULE_1__["default"],this.activeLayerInfos=null,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.headingLevel=3,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.iconClass=g.widgetIcon,this.label=void 0,this.layerInfos=null,this.messages=null,this.style=new _Legend_styles_Classic_js__WEBPACK_IMPORTED_MODULE_12__["default"],this.view=null,this.viewModel=new _Legend_LegendViewModel_js__WEBPACK_IMPORTED_MODULE_10__["default"]}initialize(){this.own(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_2__["on"])(this,"view","resize",(()=>this.scheduleRender())),Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_2__["on"])(this,"activeLayerInfos","change",(()=>this._refreshActiveLayerInfos(this.activeLayerInfos))),Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_2__["watch"])(this,"headingLevel",(e=>{const{style:s}=this;s&&(s.headingLevel=e)})),Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_2__["init"])(this,"style",((e,s)=>{s&&e!==s&&s.destroy(),e&&(e.activeLayerInfos=this.activeLayerInfos,"card"===e.type&&(e.view=this.view),e.headingLevel=this.headingLevel)})))}destroy(){this._handles.destroy(),this._handles=null}castStyle(e){if(e instanceof _Legend_styles_Card_js__WEBPACK_IMPORTED_MODULE_11__["default"]||e instanceof _Legend_styles_Classic_js__WEBPACK_IMPORTED_MODULE_12__["default"])return e;if("string"==typeof e)return"card"===e?new _Legend_styles_Card_js__WEBPACK_IMPORTED_MODULE_11__["default"]:new _Legend_styles_Classic_js__WEBPACK_IMPORTED_MODULE_12__["default"];if(e&&"string"==typeof e.type){const s={...e};delete s.type;return new("card"===e.type?_Legend_styles_Card_js__WEBPACK_IMPORTED_MODULE_11__["default"]:_Legend_styles_Classic_js__WEBPACK_IMPORTED_MODULE_12__["default"])(s)}return new _Legend_styles_Classic_js__WEBPACK_IMPORTED_MODULE_12__["default"]}render(){return Object(_support_jsxFactory_js__WEBPACK_IMPORTED_MODULE_16__["tsx"])("div",{class:this.classes(g.base,g.widget,this.style instanceof _Legend_styles_Classic_js__WEBPACK_IMPORTED_MODULE_12__["default"]?g.panel:null)},this.style.render())}_refreshActiveLayerInfos(e){this._handles.removeAll(),e.forEach((e=>this._renderOnActiveLayerInfoChange(e))),this.scheduleRender()}_renderOnActiveLayerInfoChange(e){const s=Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_2__["init"])(e,"version",(()=>this.scheduleRender()));this._handles.add(s,`version_${e.layer.uid}`);const i=Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_2__["on"])(e,"children","change",(()=>{e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}));this._handles.add(i,`children_${e.layer.uid}`),e.children.forEach((e=>this._renderOnActiveLayerInfoChange(e)))}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_aliasOf_js__WEBPACK_IMPORTED_MODULE_3__["aliasOf"])("viewModel.activeLayerInfos")],f.prototype,"activeLayerInfos",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_aliasOf_js__WEBPACK_IMPORTED_MODULE_3__["aliasOf"])("viewModel.basemapLegendVisible")],f.prototype,"basemapLegendVisible",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_aliasOf_js__WEBPACK_IMPORTED_MODULE_3__["aliasOf"])("viewModel.groundLegendVisible")],f.prototype,"groundLegendVisible",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__["property"])()],f.prototype,"headingLevel",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_aliasOf_js__WEBPACK_IMPORTED_MODULE_3__["aliasOf"])("viewModel.hideLayersNotInCurrentView")],f.prototype,"hideLayersNotInCurrentView",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_aliasOf_js__WEBPACK_IMPORTED_MODULE_3__["aliasOf"])("viewModel.keepCacheOnDestroy")],f.prototype,"keepCacheOnDestroy",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_aliasOf_js__WEBPACK_IMPORTED_MODULE_3__["aliasOf"])("viewModel.respectLayerVisibility")],f.prototype,"respectLayerVisibility",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__["property"])()],f.prototype,"iconClass",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__["property"])({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],f.prototype,"label",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_aliasOf_js__WEBPACK_IMPORTED_MODULE_3__["aliasOf"])("viewModel.layerInfos")],f.prototype,"layerInfos",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__["property"])(),Object(_support_decorators_messageBundle_js__WEBPACK_IMPORTED_MODULE_14__["messageBundle"])("esri/widgets/Legend/t9n/Legend")],f.prototype,"messages",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__["property"])()],f.prototype,"style",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_cast_js__WEBPACK_IMPORTED_MODULE_6__["cast"])("style")],f.prototype,"castStyle",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_aliasOf_js__WEBPACK_IMPORTED_MODULE_3__["aliasOf"])("viewModel.view")],f.prototype,"view",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__["property"])()],f.prototype,"viewModel",void 0),f=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__["subclass"])("esri.widgets.Legend")],f);const L=f;


/***/ }),

/***/ "li9b":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/LegendViewModel.js ***!
  \*********************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return I; });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "pO5D");
/* harmony import */ var _intl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../intl.js */ "G48n");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Accessor.js */ "/CmD");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Collection.js */ "LE9a");
/* harmony import */ var _core_Handles_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/Handles.js */ "r0DZ");
/* harmony import */ var _core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/watchUtils.js */ "N5XI");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "WbKI");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "tQ+6");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/has.js */ "wSAH");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "zqDF");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "04ZG");
/* harmony import */ var _support_ActiveLayerInfo_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./support/ActiveLayerInfo.js */ "Ff4k");
/* harmony import */ var _intl_locale_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../intl/locale.js */ "IDUf");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const h={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},c=_core_Collection_js__WEBPACK_IMPORTED_MODULE_3__["default"].ofType(_support_ActiveLayerInfo_js__WEBPACK_IMPORTED_MODULE_11__["default"]),L=["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer"],_="view.basemapView.baseLayerViews",f="view.groundView.layerViews",v="view.basemapView.referenceLayerViews",p=[_,f,"view.layerViews",v];let u=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(e),this._handles=new _core_Handles_js__WEBPACK_IMPORTED_MODULE_4__["default"],this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_3__["default"],this.activeLayerInfos=new c,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this._handles.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["init"])(this,"view",this._viewHandles),h.view),this._handles.add(Object(_intl_locale_js__WEBPACK_IMPORTED_MODULE_12__["onLocaleChange"])((()=>this._refresh())))}destroy(){this._destroyViewActiveLayerInfos(),this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}_viewHandles(){this._handles.remove(h.state),this.view&&this._handles.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["init"])(this,"state",this._stateHandles),h.state)}_stateHandles(){this._resetAll(),"ready"===this.state&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this._handles.remove([h.allLayerViews,h.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(e){this._handles.remove(e);const i=this._activeLayerInfosByLayerViewId[e];delete this._activeLayerInfosByLayerViewId[e],i&&i.parent&&i.parent.children.remove(i)}_watchPropertiesAndAllLayerViews(){const{allLayerViews:e}=this.view;e.length&&this._refresh(),this._handles.add(e.on("change",this._allLayerViewsChangeHandle.bind(this)),h.allLayerViews),this._handles.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["watch"])(this,"layerInfos, basemapLegendVisible, groundLegendVisible",this._propertiesChangeHandle.bind(this)),h.legendProperties)}_allLayerViewsChangeHandle(e){e.removed.forEach((e=>this._destroyViewActiveLayerInfo(e.uid))),this._refresh()}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(e){if(e.length<2)return;const i=[];e.forEach((r=>{if(!r.parent){const t=r.layer.parent,s=t&&"uid"in t&&this._layerViewByLayerId[t.uid],a=s&&this._activeLayerInfosByLayerViewId[s.uid];a&&-1!==e.indexOf(a)&&(i.push(r),r.parent=a,a.children.add(r),this._sortActiveLayerInfos(a.children))}})),e.removeMany(i);const r={};this.view.allLayerViews.forEach(((e,i)=>r[e.layer.uid]=i)),e.sort(((e,i)=>{const t=r[e.layer.uid]||0;return(r[i.layer.uid]||0)-t}))}_generateLayerViews(){const e=[];return p.filter(this._filterLayerViews,this).map(this.get,this).filter((e=>null!=e)).forEach(this._collectLayerViews("layerViews",e)),e}_filterLayerViews(e){const i=!this.basemapLegendVisible&&(e===_||e===v),r=!this.groundLegendVisible&&e===f;return!i&&!r}_collectLayerViews(e,i){const r=t=>(t&&t.forEach((t=>{i.push(t),r(t[e])})),i);return r}_filterLayerViewsByLayerInfos(e){const i=this.layerInfos;return!i||!i.length||i.some((i=>this._hasLayerInfo(i,e)))}_hasLayerInfo(e,i){const r=this._isLayerUIDMatching(e.layer,i.layer.uid);return r&&(this._layerInfosByLayerViewId[i.uid]=e),r}_isLayerUIDMatching(e,i){return e&&(e.uid===i||this._hasLayerUID(e.layers,i))}_hasLayerUID(e,i){return e&&e.some((e=>this._isLayerUIDMatching(e,i)))}_isLayerViewSupported(e){return!!L.includes(e.layer.declaredClass)&&(this._layerViewByLayerId[e.layer.uid]=e,!0)}_generateActiveLayerInfo(e){this._isLayerActive(e)?this._buildActiveLayerInfo(e):(this._handles.remove(e.uid),this._handles.add(Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["watch"])(e,"legendEnabled, layer.legendEnabled",(()=>this._layerActiveHandle(e))),e.uid))}_layerActiveHandle(e){this._isLayerActive(e)&&(this._handles.remove(e.uid),this._buildActiveLayerInfo(e))}_isLayerActive(e){return!this.respectLayerVisibility||e.legendEnabled&&e.get("layer.legendEnabled")}_buildActiveLayerInfo(e){var i;const r=e.layer,t=e.uid,s=this._layerInfosByLayerViewId[t];let o=this._activeLayerInfosByLayerViewId[t];if(!o){const i=s&&void 0!==s.title&&s.layer.uid===r.uid;o=new _support_ActiveLayerInfo_js__WEBPACK_IMPORTED_MODULE_11__["default"]({layer:r,layerView:e,title:i?s.title:r.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:s&&s.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[t]=o}const l=r.parent&&"uid"in r.parent&&this._layerViewByLayerId[null==(i=r.parent)?void 0:i.uid];if(o.parent=this._activeLayerInfosByLayerViewId[null==l?void 0:l.uid],!this._handles.has(t)){const i=[Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["watch"])(r,"title",(e=>this._titleHandle(e,o))),Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["watch"])(r,"renderer?, opacity, pointSymbol?, lineSymbol?, polygonSymbol?",(()=>this._constructLegendElements(o))),Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["whenTrue"])(this.view,"stationary",(()=>this._scaleHandle(o))),Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["watch"])(e,"_effectiveRenderer",(()=>this._constructLegendElements(o))),Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["watch"])(r,"effect",(()=>this._constructLegendElements(o)))];if(this.respectLayerVisibility){const t=Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["watch"])(e,"legendEnabled",(e=>this._legendEnabledHandle(e,o))),s=Object(_core_watchUtils_js__WEBPACK_IMPORTED_MODULE_5__["watch"])(r,"legendEnabled",(e=>this._legendEnabledHandle(e,o)));i.push(t,s)}this._handles.add(i,t)}o.isScaleDriven||this._constructLegendElements(o),this._addActiveLayerInfo(o)}_titleHandle(e,i){i.title=e,this._constructLegendElements(i)}_legendEnabledHandle(e,i){e?this._addActiveLayerInfo(i):this._removeActiveLayerInfo(i)}_scaleHandle(e){(e.isScaleDriven||e.hideLayersNotInCurrentView)&&this._constructLegendElements(e)}_addActiveLayerInfo(e){const{layerView:i,layer:r}=e;if(this._isLayerActive(i)&&-1===this.activeLayerInfos.indexOf(e)){const i=e.parent;if(i)-1===i.children.indexOf(e)&&i.children.push(e),this._sortActiveLayerInfos(i.children);else{var t;const i=null==(t=this.layerInfos)?void 0:t.some((e=>e.layer.uid===r.uid));r.parent&&"uid"in r.parent&&!i?this._activeLayerInfosWithNoParent.add(e):(this.activeLayerInfos.add(e),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){const e=[];this._activeLayerInfosWithNoParent.forEach((i=>{const r=i.layer.parent,t=r&&"uid"in r&&this._layerViewByLayerId[null==r?void 0:r.uid],s=this._activeLayerInfosByLayerViewId[null==t?void 0:t.uid];s&&(e.push(i),i.parent=s)})),e.length&&(this._activeLayerInfosWithNoParent.removeMany(e),e.forEach((e=>this._addActiveLayerInfo(e))))}}}_removeActiveLayerInfo(e){const i=e.parent;i?i.children.remove(e):this.activeLayerInfos.remove(e)}_constructLegendElements(e){const i=e.layer;"featureCollections"in i&&i.featureCollections?e.buildLegendElementsForFeatureCollections(i.featureCollections):"renderer"in i&&i.renderer?e.buildLegendElementsForRenderer(i.renderer):"url"in i&&i.url?e.buildLegendElementsForTools():e.children.forEach((e=>this._constructLegendElements(e)))}};Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__["property"])({type:c})],u.prototype,"activeLayerInfos",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__["property"])()],u.prototype,"basemapLegendVisible",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__["property"])()],u.prototype,"groundLegendVisible",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__["property"])()],u.prototype,"hideLayersNotInCurrentView",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__["property"])()],u.prototype,"keepCacheOnDestroy",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__["property"])()],u.prototype,"respectLayerVisibility",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__["property"])()],u.prototype,"layerInfos",void 0),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__["property"])({readOnly:!0})],u.prototype,"state",null),Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__["property"])()],u.prototype,"view",void 0),u=Object(_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__["_"])([Object(_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__["subclass"])("esri.widgets.Legend.LegendViewModel")],u);const I=u;


/***/ }),

/***/ "uK9A":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/smartMapping/support/utils.js ***!
  \*************************************************************************/
/*! exports provided: formatDateLabel, formatNumberLabel, getDeviationValues, getDynamicPathForSizeStops, getFillFromColor, getPathForSizeStops, getSizesFromVariable, getStopChanges */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatDateLabel", function() { return a; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatNumberLabel", function() { return s; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDeviationValues", function() { return u; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getDynamicPathForSizeStops", function() { return m; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFillFromColor", function() { return c; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getPathForSizeStops", function() { return h; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getSizesFromVariable", function() { return f; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getStopChanges", function() { return p; });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../Color.js */ "nvBr");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/maybe.js */ "srIe");
/* harmony import */ var _intl_date_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../intl/date.js */ "RlM3");
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../intl/number.js */ "IeLS");
/* harmony import */ var _renderers_support_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../renderers/support/utils.js */ "7BpC");
/* harmony import */ var _renderers_visualVariables_SizeVariable_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../renderers/visualVariables/SizeVariable.js */ "w/y1");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
function a(t){return Object(_intl_date_js__WEBPACK_IMPORTED_MODULE_2__["formatDate"])(new Date(t),_renderers_support_utils_js__WEBPACK_IMPORTED_MODULE_4__["timelineDateFormatOptions"])}function s(t){const n=2,i=Math.floor(Math.log10(Math.abs(t)))+1,e=i<4||i>6?4:i,r=1e6,a=Math.abs(t)>=r?"compact":"standard";return Object(_intl_number_js__WEBPACK_IMPORTED_MODULE_3__["formatNumber"])(t,{notation:a,minimumSignificantDigits:n,maximumSignificantDigits:e})}function u(t,i,o){if(!Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isSome"])(i)||!Object(_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__["isSome"])(t))return[];const e=[];for(let n=-1*o;n<=o;n++)0!==n&&e.push(i+n*t);return e}function m(t){const{max:n,min:i,padding:o,pathHeight:e,pathWidth:r,stops:a}=t,s=n-i;let u,m=`M0 0 L${r} 0 `;const h=3===a.length?[a[0],a[1],a[2]]:[a[0],a[2],a[4]],f=Math.min.apply(Math,h.map((t=>t.size))),p=Math.max(Math.abs(h[0].size-h[1].size),Math.abs(h[2].size-h[1].size));return h.reverse(),h.forEach((({size:t,value:n},a)=>{const h=Math.round((t-f)/p*100)/100,c=Math.round(e-(n-i)/s*e);u=h*r,0===u&&(u=o*r),0===a&&(m+=`L${u} 0 `),m+=`L${u} ${c} `})),m+=`L${u} ${e} L0 ${e} L0 0 Z`,m}function h(t){const{bottomValue:n,bottomWidth:i,max:o,min:e,pathHeight:r,pathWidth:a,topValue:s,topWidth:u}=t,m=u*a,h=i*a,f=o-e,p=Math.round(r-(n-e)/f*r);return`M${m} 0 L${m} ${Math.round(r-(s-e)/f*r)} L${h} ${p} L${h} ${r} L0 ${r} L0 0 Z`}function f(t){let n=t.maxSize,i=t.minSize;return n instanceof _renderers_visualVariables_SizeVariable_js__WEBPACK_IMPORTED_MODULE_5__["default"]&&(n=n.stops[0].size),i instanceof _renderers_visualVariables_SizeVariable_js__WEBPACK_IMPORTED_MODULE_5__["default"]&&(i=i.stops[0].size),[n,i]}function p(t,n,i){const o=i.length-1,e=i[0],r=i[o]-e,a=n-t,s=[];for(let u=1;u<o;u++){const n=(i[u]-e)/r*a+t;s.push({index:u,value:n})}return s.unshift({index:0,value:t}),s.push({index:o,value:n}),s}function c(n){return n instanceof _Color_js__WEBPACK_IMPORTED_MODULE_0__["default"]?n.toCss(!0):_Color_js__WEBPACK_IMPORTED_MODULE_0__["default"].fromString(n).toCss(!0)}


/***/ }),

/***/ "y1wk":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/widgets/Legend/support/relationshipRampUtils.js ***!
  \***********************************************************************************/
/*! exports provided: getRelationshipRampColors2D, getRelationshipRampElement, getRotationAngleForFocus */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRelationshipRampColors2D", function() { return L; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRelationshipRampElement", function() { return i; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getRotationAngleForFocus", function() { return f; });
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/lang.js */ "f/qv");
/* harmony import */ var _symbols_support_gfxUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../symbols/support/gfxUtils.js */ "zdBc");
/* harmony import */ var _symbols_support_previewSymbol3D_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../symbols/support/previewSymbol3D.js */ "cg+0");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
const s={HH:315,HL:45,LL:135,LH:225},l={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function n(t){if(!t)return;const{type:s}=t;if(s.indexOf("3d")>-1)return Object(_symbols_support_previewSymbol3D_js__WEBPACK_IMPORTED_MODULE_2__["getSymbolLayerFill"])(t.symbolLayers.getItemAt(0));if("simple-line"===s){const o=Object(_symbols_support_gfxUtils_js__WEBPACK_IMPORTED_MODULE_1__["getStroke"])(t);return o&&o.color}if("simple-marker"===t.type&&("x"===t.style||"cross"===t.style)){const o=Object(_symbols_support_gfxUtils_js__WEBPACK_IMPORTED_MODULE_1__["getStroke"])(t);return o&&o.color}return Object(_symbols_support_gfxUtils_js__WEBPACK_IMPORTED_MODULE_1__["getFill"])(t)}function H(t,e){const o=e.HH.label,r=e.LL.label,s=e.HL.label,l=e.LH.label;switch(t){case"HH":default:return{top:o,bottom:r,left:s,right:l};case"HL":return{top:s,bottom:l,left:r,right:o};case"LL":return{top:r,bottom:o,left:l,right:s};case"LH":return{top:l,bottom:s,left:o,right:r}}}function L(e,o){const r=[],s=e.length**.5,l=Object(_core_lang_js__WEBPACK_IMPORTED_MODULE_0__["clone"])(e),n=(o||"HH").split(""),H=n[0],L="H"===n[1];for(;l.length;){const t=[];for(;t.length<s;)t.push(l.shift());L&&t.reverse(),r.push(t)}return"L"===H&&r.reverse(),r}function i(t){const{focus:e,infos:o,numClasses:r}=t,s=l[r],L={};o.forEach((t=>{L[t.value]={label:t.label,fill:n(t.symbol)}}));const i=[];for(let l=0;l<r;l++){const t=[];for(let e=0;e<r;e++){const o=L[s[l][e]];t.push(o.fill)}i.push(t)}return{type:"relationship-ramp",numClasses:r,focus:e,colors:i,labels:H(e,L),rotation:f(e)}}function f(t){let e=s[t];return t&&null==e&&(e=s.HH),e||0}


/***/ })

}]);
//# sourceMappingURL=Legend-js.js.map